spring:
  profiles:
    active: dev
  datasource:
    url: ${JDBC_DATABASE_URL}
    username: ${DB_USERNAME}
    password: ${DB_PASSWORD}
  
  thymeleaf:
    cache: false
    encoding: UTF-8
    mode: HTML
    prefix: classpath:/templates/
    suffix: .html
  
  messages:
    basename: messages
    encoding: UTF-8
    cache-duration: 3600
  
  servlet:
    multipart:
      max-file-size: 5MB
      max-request-size: 5MB

server:
  port: 8081
  
app:
  base-url: http://localhost:8081
  upload:
    dir: uploads
    max-file-size: 5MB
    max-request-size: 5MB

# Payment configuration
payment:
  payos:
    # PayOS credentials - Updated with real account credentials
    client-id: 59e68d4d-6eb8-4259-93ab-b4c6c3a6af6f
    api-key: 9956541e-86ab-470a-a03c-6d1cc67d95b1
    checksum-key: eb7485ce4c656e02cae0629fcce02b2933d5b2a9b0a10447c9aa0662125835cf
    endpoint: https://api-merchant.payos.vn
    return-url: ${app.base-url}/payment/payos/return
    cancel-url: ${app.base-url}/payment/payos/cancel
    webhook-url: ${app.base-url}/payment/api/payos/webhook

logging:
  level:
    org.hibernate.SQL: INFO
    org.springframework.security: INFO

# Rate limiting configuration
rate:
  limit:
    # Authentication endpoints - Very strict
    login:
      requests: 5
      window: 30  
      auto-reset: 3600  # 1 hour
      permanent-block-threshold: 10  # Block permanently after 10 violations
    forgot-password:
      requests: 3
      window: 300  # 5 minutes
      auto-reset: 1800  # 30 minutes
      permanent-block-threshold: 5
    register:
      requests: 2
      window: 300  # 5 minutes
      auto-reset: 1800  # 30 minutes
      permanent-block-threshold: 5
    reset-password:
      requests: 3
      window: 300  # 5 minutes
      auto-reset: 1800  # 30 minutes
      permanent-block-threshold: 5
    
    # Business operations - Moderate
    booking:
      requests: 10
      window: 60   # 1 minute
      auto-reset: 300  # 5 minutes
      permanent-block-threshold: 20
    chat:
      requests: 30
      window: 60   # 1 minute
      auto-reset: 300  # 5 minutes
      permanent-block-threshold: 50
    review:
      requests: 3
      window: 300  # 5 minutes
      auto-reset: 1800  # 30 minutes
      permanent-block-threshold: 10
    
    # File operations - Strict
    file-upload:
      requests: 5
      window: 60   # 1 minute
      auto-reset: 300  # 5 minutes
      permanent-block-threshold: 15
    
    # Payment operations - Very strict
    payment:
      requests: 3
      window: 60   # 1 minute
      auto-reset: 1800  # 30 minutes
      permanent-block-threshold: 5
    
    # API endpoints - Moderate
    api:
      requests: 100
      window: 60   # 1 minute
      auto-reset: 300  # 5 minutes
      permanent-block-threshold: 200
    
    # General requests - Lenient
    general:
      requests: 200
      window: 60   # 1 minute
      permanent-block-threshold: 500
    
    # Advanced settings
    advanced:
      # Enable suspicious activity detection
      suspicious-detection: true
      # Risk score thresholds
      risk-score-high: 80
      risk-score-medium: 50
      risk-score-low: 20
      # Auto-block settings
      auto-block-enabled: true
      auto-block-threshold: 15
      # Monitoring settings
      monitoring-enabled: true
      alert-threshold: 5
      # Cleanup settings
      cleanup-enabled: true
      cleanup-days: 30