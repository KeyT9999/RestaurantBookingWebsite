<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title th:text="${notification.title}">Chi tiết thông báo - BookEat</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
	<link th:href="@{/css/luxury.css}" rel="stylesheet">
	<style>
		/* Page baseline light/blue */
		.page-bg { background-color: var(--background-light); min-height:100vh; }
		.section-title { color: var(--text-dark); font-family: var(--font-heading); font-weight: 700; }
		.detail-card { background: var(--background-white); border:1px solid var(--border-light); color: var(--text-dark); border-radius:12px; box-shadow: var(--shadow-card); }
		.notification-icon { width:64px; height:64px; border-radius:50%; background: var(--background-light); color: var(--primary-blue); display:flex; align-items:center; justify-content:center; font-weight:700; font-size:1.5rem; }
		.btn-gold { background: var(--primary-blue); border-color: var(--primary-blue); color:#fff; box-shadow: var(--shadow-button); }
		.btn-gold:hover { background: var(--primary-blue-dark); border-color: var(--primary-blue-dark); box-shadow: var(--shadow-hover); transform: translateY(-1px); }
		.link-clear { color: var(--text-dark); border-color: var(--border-medium); }
		.link-clear:hover { background: var(--background-light); }
		.content-text { color: var(--text-dark); line-height:1.6; }
		.meta-info { color: var(--text-light); }
		.admin-content { padding-top: 100px !important; }
	</style>
</head>
<body class="page-bg">
	<div th:insert="fragments/flash :: flash"></div>
	<div th:replace="~{fragments/header :: site-header}"></div>

	<div class="admin-content py-4">
		<div class="container">
			<div class="row justify-content-center">
				<div class="col-lg-8">
					<div class="d-flex align-items-center mb-4">
						<a th:href="@{/notifications}" class="btn btn-outline-secondary me-3">
							<i class="fas fa-arrow-left"></i>
						</a>
						<h1 class="section-title mb-0">
							<i class="fas fa-bell text-primary me-2"></i> Chi tiết thông báo
						</h1>
					</div>

				<div class="card detail-card">
					<div class="card-body p-4">
						<div class="d-flex align-items-start mb-4">
							<div class="notification-icon me-3" th:text="${notification.type.toString().substring(0,1)}">S</div>
							<div class="flex-grow-1">
								<h2 class="text-white mb-2" th:text="${notification.title}">Tiêu đề thông báo</h2>
								<div class="mb-3">
									<span class="badge" 
										  th:classappend="${notification.type.name()=='SYSTEM_ANNOUNCEMENT'} ? ' bg-primary' : 
										  (${notification.type.name()=='BOOKING_CONFIRMED'} ? ' bg-success' : 
										  (${notification.type.name()=='BOOKING_CANCELLED'} ? ' bg-danger' : 
										  (${notification.type.name()=='PAYMENT_SUCCESS'} ? ' bg-info' : ' bg-warning')))"
										  th:text="${notification.type}">SYSTEM</span>
									<span th:if="${notification.unread}" class="badge bg-warning text-dark ms-2">
										<i class="fas fa-circle me-1"></i>Chưa đọc
									</span>
									<span th:if="${notification.priority > 0}" class="badge bg-danger ms-2">
										<i class="fas fa-exclamation-triangle me-1"></i>Ưu tiên cao
									</span>
								</div>
								<div class="meta-info">
									<div class="mb-1">
										<i class="fas fa-calendar me-1"></i>
										<span th:text="${#temporals.format(notification.publishAt, 'dd/MM/yyyy')}">01/01/2024</span>
									</div>
									<div>
										<i class="fas fa-clock me-1"></i>
										<span th:text="${#temporals.format(notification.publishAt, 'HH:mm')}">10:00</span>
									</div>
								</div>
							</div>
						</div>
						
						<div class="content-text mb-4" th:utext="${notification.content}">
							Nội dung thông báo
						</div>
						
						<div th:if="${notification.linkUrl != null and !notification.linkUrl.isEmpty()}" class="mb-4">
							<a th:href="${notification.linkUrl}" 
							   th:text="${notification.linkUrl}" 
							   class="btn btn-gold" 
							   target="_blank">
								<i class="fas fa-external-link-alt me-1"></i> Xem thêm
							</a>
						</div>

						<div class="d-flex justify-content-between align-items-center pt-3 border-top border-secondary">
							<a th:href="@{/notifications}" class="btn btn-outline-light">
								<i class="fas fa-arrow-left me-1"></i> Quay lại
							</a>
							<div>
														<button type="button" class="btn btn-outline-success me-2" 
								th:onclick="'markAsRead(' + ${notification.id} + ')'" 
								th:if="${notification.unread}">
								<i class="fas fa-check me-1"></i> Đánh dấu đã đọc
							</button>
								<a th:href="@{/}" class="btn btn-gold">
									<i class="fas fa-home me-1"></i> Về trang chủ
								</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div th:replace="~{fragments/footer :: site-footer}"></div>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
	<script th:src="@{/js/main.js}" defer></script>
	<script>
		function markAsRead(notificationId) {
			fetch('/notifications/' + notificationId + '/mark-read', {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json',
				}
			})
			.then(response => {
				if (response.ok) {
					location.reload();
				}
			})
			.catch(error => {
				console.error('Error:', error);
			});
		}
	</script>
</body>
</html> 