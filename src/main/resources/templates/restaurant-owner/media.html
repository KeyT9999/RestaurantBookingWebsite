<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title th:text="${pageTitle}">Qu·∫£n l√Ω Media - Media Management</title>
    <link rel="stylesheet" href="/css/restaurant-admin.css" />
</head>
<body>
    <nav class="page-switch card">
        <a class="nav-btn" href="/restaurant-owner/dashboard" title="V·ªÅ FOH Dashboard">‚Üê FOH Dashboard</a>
        <a class="nav-btn" href="/restaurant-owner/profile" title="H·ªì s∆° Nh√† h√†ng">‚Üí H·ªì s∆° Nh√† h√†ng</a>
    </nav>

    <div class="container">
        <!-- Flash Messages -->
        <div th:if="${success}" class="alert alert-success" th:text="${success}"></div>
        <div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>

        <header class="nav card">
            <div class="nav-left">
                <h1 class="h1">Qu·∫£n l√Ω Media</h1>
                <p class="muted">Upload v√† qu·∫£n l√Ω h√¨nh ·∫£nh, logo, menu c·ªßa nh√† h√†ng</p>
            </div>
            <div class="actions">
                <button class="btn" data-open="panel-upload-media">+ Upload Media</button>
                <button class="btn btn-ghost">Bulk Upload</button>
            </div>
        </header>

        <!-- Media Categories -->
        <div class="card">
            <h2 class="h2">Danh m·ª•c Media</h2>
            <div class="tabs">
                <button class="tab is-active" data-category="all">T·∫•t c·∫£</button>
                <button class="tab" data-category="logo">Logo</button>
                <button class="tab" data-category="cover">Cover</button>
                <button class="tab" data-category="gallery">Gallery</button>
                <button class="tab" data-category="menu">Menu</button>
                <button class="tab" data-category="dishes">M√≥n ƒÉn</button>
            </div>
        </div>

        <!-- Upload Area -->
        <div class="card">
            <h2 class="h2">Upload Media</h2>
            <div class="grid grid-2">
                <div class="outline pad" style="border: 2px dashed #ccc; text-align: center; min-height: 200px; display: flex; flex-direction: column; justify-content: center;">
                    <div style="font-size: 3rem; color: #ccc; margin-bottom: 1rem;">üìÅ</div>
                    <h3>K√©o th·∫£ file v√†o ƒë√¢y</h3>
                    <p class="muted">Ho·∫∑c click ƒë·ªÉ ch·ªçn file</p>
                    <input type="file" multiple accept="image/*" style="display: none;" id="file-input">
                    <button class="btn" onclick="document.getElementById('file-input').click()">Ch·ªçn file</button>
                </div>
                <div class="outline pad">
                    <h3 class="h3">Th√¥ng tin upload</h3>
                    <form class="stack">
                        <label class="form-item">
                            <span class="form-label">Lo·∫°i media</span>
                            <select class="input">
                                <option value="gallery">Gallery</option>
                                <option value="logo">Logo</option>
                                <option value="cover">Cover</option>
                                <option value="menu">Menu</option>
                                <option value="dishes">M√≥n ƒÉn</option>
                            </select>
                        </label>
                        <label class="form-item">
                            <span class="form-label">M√¥ t·∫£</span>
                            <textarea class="input" rows="3" placeholder="M√¥ t·∫£ ng·∫Øn g·ªçn..."></textarea>
                        </label>
                        <label class="form-item">
                            <span class="form-label">Alt text</span>
                            <input type="text" class="input" placeholder="M√¥ t·∫£ cho SEO..." />
                        </label>
                        <div class="actions">
                            <button class="btn">Upload</button>
                            <button class="btn btn-ghost">H·ªßy</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Media Grid -->
        <div class="card">
            <h2 class="h2">Th∆∞ vi·ªán Media</h2>
            <div class="actions" style="margin-bottom: 1rem;">
                <button class="btn btn-ghost small">Ch·ªçn t·∫•t c·∫£</button>
                <button class="btn btn-ghost small">B·ªè ch·ªçn</button>
                <button class="btn btn-ghost small">X√≥a ƒë√£ ch·ªçn</button>
                <div class="spacer"></div>
                <select class="input" style="width: auto;">
                    <option>S·∫Øp x·∫øp theo t√™n</option>
                    <option>S·∫Øp x·∫øp theo ng√†y</option>
                    <option>S·∫Øp x·∫øp theo k√≠ch th∆∞·ªõc</option>
                </select>
            </div>
            
            <div class="grid grid-4 media-grid">
                <!-- Media Item 1 -->
                <div class="filebox medium" style="position: relative; cursor: pointer;">
                    <input type="checkbox" style="position: absolute; top: 8px; left: 8px;">
                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">üñºÔ∏è</div>
                    <div style="font-weight: 600; margin-bottom: 0.25rem;">restaurant-logo.png</div>
                    <div style="font-size: 0.8rem; color: #666;">Logo ‚Ä¢ 2.3MB</div>
                    <div style="position: absolute; bottom: 8px; right: 8px;">
                        <button class="btn btn-ghost small">‚ãØ</button>
                    </div>
                </div>

                <!-- Media Item 2 -->
                <div class="filebox medium" style="position: relative; cursor: pointer;">
                    <input type="checkbox" style="position: absolute; top: 8px; left: 8px;">
                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">üçΩÔ∏è</div>
                    <div style="font-weight: 600; margin-bottom: 0.25rem;">menu-2025.pdf</div>
                    <div style="font-size: 0.8rem; color: #666;">Menu ‚Ä¢ 1.8MB</div>
                    <div style="position: absolute; bottom: 8px; right: 8px;">
                        <button class="btn btn-ghost small">‚ãØ</button>
                    </div>
                </div>

                <!-- Media Item 3 -->
                <div class="filebox medium" style="position: relative; cursor: pointer;">
                    <input type="checkbox" style="position: absolute; top: 8px; left: 8px;">
                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">üè¢</div>
                    <div style="font-weight: 600; margin-bottom: 0.25rem;">restaurant-cover.jpg</div>
                    <div style="font-size: 0.8rem; color: #666;">Cover ‚Ä¢ 4.1MB</div>
                    <div style="position: absolute; bottom: 8px; right: 8px;">
                        <button class="btn btn-ghost small">‚ãØ</button>
                    </div>
                </div>

                <!-- Media Item 4 -->
                <div class="filebox medium" style="position: relative; cursor: pointer;">
                    <input type="checkbox" style="position: absolute; top: 8px; left: 8px;">
                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">üçú</div>
                    <div style="font-weight: 600; margin-bottom: 0.25rem;">pho-bo.jpg</div>
                    <div style="font-size: 0.8rem; color: #666;">M√≥n ƒÉn ‚Ä¢ 1.2MB</div>
                    <div style="position: absolute; bottom: 8px; right: 8px;">
                        <button class="btn btn-ghost small">‚ãØ</button>
                    </div>
                </div>

                <!-- Media Item 5 -->
                <div class="filebox medium" style="position: relative; cursor: pointer;">
                    <input type="checkbox" style="position: absolute; top: 8px; left: 8px;">
                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">üç§</div>
                    <div style="font-weight: 600; margin-bottom: 0.25rem;">goi-cuon.jpg</div>
                    <div style="font-size: 0.8rem; color: #666;">M√≥n ƒÉn ‚Ä¢ 0.9MB</div>
                    <div style="position: absolute; bottom: 8px; right: 8px;">
                        <button class="btn btn-ghost small">‚ãØ</button>
                    </div>
                </div>

                <!-- Media Item 6 -->
                <div class="filebox medium" style="position: relative; cursor: pointer;">
                    <input type="checkbox" style="position: absolute; top: 8px; left: 8px;">
                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">üèÆ</div>
                    <div style="font-weight: 600; margin-bottom: 0.25rem;">interior-1.jpg</div>
                    <div style="font-size: 0.8rem; color: #666;">Gallery ‚Ä¢ 3.5MB</div>
                    <div style="position: absolute; bottom: 8px; right: 8px;">
                        <button class="btn btn-ghost small">‚ãØ</button>
                    </div>
                </div>

                <!-- Add more media items -->
                <div class="filebox medium" style="position: relative; cursor: pointer; border: 2px dashed #ccc; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                    <div style="font-size: 2rem; color: #ccc; margin-bottom: 0.5rem;">+</div>
                    <div style="font-weight: 600; color: #666;">Th√™m media</div>
                </div>
            </div>

            <!-- Pagination -->
            <div class="pagination">
                <button class="btn btn-ghost">¬´ Tr∆∞·ªõc</button>
                <span class="muted">Trang 1/3</span>
                <button class="btn btn-ghost">Sau ¬ª</button>
            </div>
        </div>

        <!-- Storage Info -->
        <div class="grid grid-3">
            <div class="card">
                <h3 class="h3">T·ªïng dung l∆∞·ª£ng</h3>
                <p style="font-size: 1.5rem; margin: 0; color: #007bff;">45.2 MB</p>
                <small class="muted">/ 500 MB</small>
            </div>
            <div class="card">
                <h3 class="h3">S·ªë file</h3>
                <p style="font-size: 1.5rem; margin: 0; color: #28a745;">23</p>
                <small class="muted">file</small>
            </div>
            <div class="card">
                <h3 class="h3">Dung l∆∞·ª£ng c√≤n l·∫°i</h3>
                <p style="font-size: 1.5rem; margin: 0; color: #ffc107;">454.8 MB</p>
                <small class="muted">c√≤n l·∫°i</small>
            </div>
        </div>
    </div>

    <!-- Modal: Upload Media -->
    <aside class="panel" id="panel-upload-media" aria-hidden="true">
        <div class="panel__body card">
            <div class="panel__head">
                <h3 class="h3">Upload Media</h3>
                <button class="btn btn-ghost" data-close>ƒê√≥ng</button>
            </div>
            <form th:action="@{/restaurant-owner/media/upload}" method="post" enctype="multipart/form-data" class="grid grid-2">
                <div class="outline pad">
                    <h4 class="h3">Ch·ªçn file</h4>
                    <input type="file" name="file" multiple accept="image/*" class="input" required />
                    <p class="muted">H·ªó tr·ª£: JPG, PNG, GIF, WebP. T·ªëi ƒëa 10MB/file.</p>
                </div>
                <div class="outline pad">
                    <h4 class="h3">Th√¥ng tin</h4>
                    <label class="form-item">
                        <span class="form-label">Lo·∫°i media</span>
                        <select name="type" class="input" required>
                            <option value="gallery">Gallery</option>
                            <option value="logo">Logo</option>
                            <option value="cover">Cover</option>
                            <option value="menu">Menu</option>
                            <option value="dishes">M√≥n ƒÉn</option>
                        </select>
                    </label>
                    <label class="form-item">
                        <span class="form-label">Nh√† h√†ng</span>
                        <select name="restaurantId" class="input" required>
                            <option th:each="restaurant : ${restaurants}" 
                                    th:value="${restaurant.restaurantId}" 
                                    th:text="${restaurant.restaurantName}">Nh√† h√†ng</option>
                        </select>
                    </label>
                    <label class="form-item">
                        <span class="form-label">M√¥ t·∫£</span>
                        <textarea name="description" class="input" rows="3"></textarea>
                    </label>
                    <div class="actions">
                        <button type="submit" class="btn">Upload</button>
                        <button type="button" class="btn btn-ghost" data-close>H·ªßy</button>
                    </div>
                </div>
            </form>
        </div>
    </aside>

    <script>
        // Category tabs
        document.querySelectorAll('.tab[data-category]').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.tab[data-category]').forEach(t => t.classList.remove('is-active'));
                tab.classList.add('is-active');
                console.log('Filter by category:', tab.getAttribute('data-category'));
            });
        });

        // File input
        const fileInput = document.getElementById('file-input');
        if (fileInput) {
            fileInput.addEventListener('change', function(e) {
                console.log('Files selected:', e.target.files.length);
            });
        }

        // Modal functionality
        document.querySelectorAll("[data-open]").forEach((b) => {
            b.addEventListener("click", () => {
                const id = b.getAttribute("data-open");
                const panel = document.getElementById(id);
                if (panel) panel.setAttribute("aria-hidden", "false");
            });
        });
        
        document.querySelectorAll("[data-close]").forEach((b) => {
            b.addEventListener("click", () => {
                const panel = b.closest(".panel");
                panel && panel.setAttribute("aria-hidden", "true");
            });
        });
    </script>
</body>
</html>
