<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${pageTitle} ?: 'B·∫£ng ƒëi·ªÅu khi·ªÉn nh√† h√†ng - Book Eat'">B·∫£ng ƒëi·ªÅu khi·ªÉn nh√† h√†ng - Book Eat</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link th:href="@{/css/design-system.css}" rel="stylesheet">
    <link th:href="@{/css/restaurant-admin.css}" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .dashboard-hero-section {
            padding: var(--ds-space-16) 0 var(--ds-space-10);
        }
        .dashboard-hero {
            position: relative;
            overflow: hidden;
            border-radius: var(--ds-radius-3xl);
            background: linear-gradient(135deg, #1f2937, #111827);
            color: #f8fafc;
            padding: var(--ds-space-10);
        }
        .dashboard-hero::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(79,70,229,0.24), rgba(14,116,144,0.2));
            pointer-events: none;
        }
        .dashboard-hero > * {
            position: relative;
            z-index: 1;
        }
        .dashboard-pill {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.4rem 1rem;
            border-radius: var(--ds-radius-full);
            font-weight: 600;
            font-size: 0.85rem;
            letter-spacing: 0.02em;
            color: #f8fafc;
            background: rgba(255,255,255,0.18);
        }
        .dashboard-pill.primary {
            background: linear-gradient(135deg, #f97316, #ea580c);
        }
        .dashboard-pill.secondary {
            background: rgba(148,163,184,0.35);
        }
        .dashboard-hero-meta {
            display: flex;
            flex-wrap: wrap;
            gap: var(--ds-space-3);
        }
        .dashboard-hero-chip {
            display: inline-flex;
            align-items: center;
            gap: var(--ds-space-2);
            padding: 0.4rem 1.1rem;
            border-radius: var(--ds-radius-full);
            font-weight: 600;
            font-size: 0.9rem;
            background: rgba(255,255,255,0.16);
        }
        .dashboard-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: var(--ds-space-3);
            margin-top: var(--ds-space-6);
        }
        .dashboard-tab {
            display: inline-flex;
            align-items: center;
            gap: var(--ds-space-2);
            padding: 0.65rem 1.2rem;
            border-radius: var(--ds-radius-full);
            background: rgba(15,23,42,0.35);
            color: #f8fafc;
            font-weight: 500;
            text-decoration: none;
            transition: transform 0.2s ease, background 0.2s ease, box-shadow 0.2s ease;
        }
        .dashboard-tab:hover {
            transform: translateY(-2px);
            background: rgba(255,255,255,0.22);
        }
        .dashboard-tab.active {
            background: #f97316;
            color: #fff;
            box-shadow: 0 14px 30px rgba(249,115,22,0.35);
        }
        .dashboard-tab.disabled {
            pointer-events: none;
            opacity: 0.5;
        }
        .dashboard-main-section {
            padding: var(--ds-space-12) 0 var(--ds-space-16);
        }
        .dashboard-stat-grid {
            display: grid;
            gap: var(--ds-space-5);
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        }
        .dashboard-stat-card {
            border-radius: var(--ds-radius-2xl);
            padding: var(--ds-space-6);
            background: var(--ds-primary-white);
            box-shadow: 0 16px 40px rgba(15,23,42,0.08);
            display: flex;
            flex-direction: column;
            gap: var(--ds-space-3);
        }
        .dashboard-stat-card.primary { background: linear-gradient(135deg, #eef2ff, #e0e7ff); }
        .dashboard-stat-card.success { background: linear-gradient(135deg, #dcfce7, #bbf7d0); }
        .dashboard-stat-card.warning { background: linear-gradient(135deg, #fef3c7, #fde68a); }
        .dashboard-stat-card.danger { background: linear-gradient(135deg, #fee2e2, #fecaca); }
        .dashboard-stat-card.accent { background: linear-gradient(135deg, #ede9fe, #ddd6fe); }
        .dashboard-stat-icon {
            width: 48px;
            height: 48px;
            border-radius: var(--ds-radius-xl);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            background: rgba(15,23,42,0.08);
            color: #0f172a;
        }
        .dashboard-stat-value {
            font-size: 2.25rem;
            font-weight: 700;
            color: #0f172a;
        }
        .dashboard-stat-label {
            font-weight: 500;
            color: #475569;
            text-transform: uppercase;
            letter-spacing: 0.06em;
            font-size: 0.85rem;
        }
        .dashboard-restaurant-grid {
            display: grid;
            gap: var(--ds-space-4);
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        }
        .dashboard-restaurant-card {
            border-radius: var(--ds-radius-2xl);
            padding: var(--ds-space-5);
            background: var(--ds-primary-white);
            border: 1px solid #e2e8f0;
            box-shadow: 0 12px 28px rgba(15,23,42,0.08);
            display: flex;
            flex-direction: column;
            gap: var(--ds-space-3);
        }
        .dashboard-restaurant-meta {
            color: #64748b;
            font-size: 0.95rem;
        }
        .dashboard-actions {
            display: flex;
            flex-wrap: wrap;
            gap: var(--ds-space-2);
        }
        .ds-btn-compact {
            padding: 0.45rem 0.9rem;
            font-size: 0.85rem;
        }
        .dashboard-quick-actions {
            display: grid;
            gap: var(--ds-space-4);
            grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
        }
        .dashboard-quick-link {
            display: flex;
            flex-direction: column;
            gap: var(--ds-space-1);
            padding: var(--ds-space-4);
            border-radius: var(--ds-radius-xl);
            background: var(--ds-primary-white);
            border: 1px solid #e0e7ff;
            text-decoration: none;
            color: #0f172a;
            font-weight: 600;
            box-shadow: 0 12px 28px rgba(79,70,229,0.12);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .dashboard-quick-link span {
            font-weight: 500;
            color: #64748b;
            font-size: 0.85rem;
        }
        .dashboard-quick-link:hover {
            transform: translateY(-4px);
            box-shadow: 0 16px 36px rgba(59,130,246,0.22);
        }
        .dashboard-two-column {
            display: grid;
            gap: var(--ds-space-5);
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        }
        .dashboard-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: var(--ds-space-3);
        }
        .dashboard-booking-item {
            border-radius: var(--ds-radius-xl);
            border: 1px solid #e2e8f0;
            padding: var(--ds-space-4);
            background: var(--ds-primary-white);
            box-shadow: 0 10px 26px rgba(15,23,42,0.08);
            margin-bottom: var(--ds-space-3);
        }
        .dashboard-booking-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--ds-space-2);
        }
        .dashboard-booking-meta {
            display: flex;
            flex-wrap: wrap;
            gap: var(--ds-space-3);
            color: #475569;
            font-size: 0.88rem;
        }
        .dashboard-status {
            display: inline-flex;
            align-items: center;
            padding: 0.3rem 0.75rem;
            border-radius: var(--ds-radius-full);
            font-size: 0.8rem;
            font-weight: 600;
        }
        .dashboard-status.info { background: #dbeafe; color: #1e40af; }
        .dashboard-status.success { background: #dcfce7; color: #166534; }
        .dashboard-status.warning { background: #fef3c7; color: #b45309; }
        .dashboard-empty-state {
            text-align: center;
            padding: var(--ds-space-8);
            border-radius: var(--ds-radius-2xl);
            background: #f8fafc;
            border: 1px dashed #cbd5f5;
            color: #475569;
            display: flex;
            flex-direction: column;
            gap: var(--ds-space-3);
            align-items: center;
        }
        .dashboard-table-grid {
            display: grid;
            gap: var(--ds-space-4);
            grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
        }
        .dashboard-table-card {
            border-radius: var(--ds-radius-xl);
            padding: var(--ds-space-4);
            background: var(--ds-primary-white);
            box-shadow: 0 10px 24px rgba(15,23,42,0.08);
            text-align: center;
        }
        .dashboard-table-card strong {
            display: block;
            font-size: 1.4rem;
            color: #1f2937;
            margin-bottom: var(--ds-space-2);
        }
        .dashboard-waitlist-grid {
            display: grid;
            gap: var(--ds-space-4);
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        }
        .waitlist-panel {
            border-radius: var(--ds-radius-xl);
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            padding: var(--ds-space-5);
            display: flex;
            flex-direction: column;
            gap: var(--ds-space-4);
        }
        .waitlist-item {
            border-radius: var(--ds-radius-xl);
            border: 1px solid #e2e8f0;
            padding: var(--ds-space-4);
            background: var(--ds-primary-white);
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: var(--ds-space-4);
            box-shadow: 0 10px 24px rgba(15,23,42,0.08);
        }
        .waitlist-item.called {
            border-color: #10b981;
            box-shadow: 0 14px 32px rgba(16,185,129,0.22);
        }
        .waitlist-info { flex: 1; }
        .waitlist-details {
            display: flex;
            flex-wrap: wrap;
            gap: var(--ds-space-3);
            color: #475569;
            font-size: 0.85rem;
        }
        .waitlist-actions {
            display: flex;
            flex-wrap: wrap;
            gap: var(--ds-space-2);
        }
        footer.ds-dashboard-footer {
            padding: var(--ds-space-8) 0;
            text-align: center;
            color: #94a3b8;
        }
        @media (max-width: 768px) {
            .dashboard-hero {
                padding: var(--ds-space-8);
            }
        }
    </style>
</head>
<body class="ds-bg-gray-50">
    <div th:with="activeNav='restaurants'"
         th:replace="~{fragments/design-system-components :: unified-header}"></div>

    <main>
        <section class="dashboard-hero-section" th:with="defaultRestaurant=${restaurants != null and !#lists.isEmpty(restaurants) ? restaurants[0] : null}">
            <div class="ds-container">
                <div class="dashboard-hero ds-card ds-card-emphasis ds-flex ds-flex-col ds-gap-4"
                     th:with="primaryRestaurant=${restaurants != null and !#lists.isEmpty(restaurants) ? restaurants[0] : null}">
                    <div class="ds-flex ds-flex-wrap ds-gap-3 ds-align-center">
                        <span class="dashboard-pill primary"><i class="fas fa-utensils"></i>Restaurant Owner</span>
                        <span class="dashboard-pill secondary" th:text="${#temporals.format(#temporals.createNow(), 'dd/MM/yyyy')}">24/10/2025</span>
                    </div>
                    <div>
                        <h1 class="ds-heading-2 ds-mb-2">B·∫£ng ƒëi·ªÅu khi·ªÉn nh√† h√†ng</h1>
                        <p class="ds-text-large ds-text-secondary ds-m-0"
                           th:text="${primaryRestaurant != null ? 'Qu·∫£n l√Ω ' + primaryRestaurant.restaurantName + ' v√† theo d√µi ho·∫°t ƒë·ªông theo th·ªùi gian th·ª±c.' : 'Qu·∫£n l√Ω c√°c nh√† h√†ng c·ªßa b·∫°n v√† theo d√µi ho·∫°t ƒë·ªông theo th·ªùi gian th·ª±c.'}">
                            Qu·∫£n l√Ω c√°c nh√† h√†ng c·ªßa b·∫°n v√† theo d√µi ho·∫°t ƒë·ªông theo th·ªùi gian th·ª±c.
                        </p>
                    </div>
                    <div class="dashboard-hero-meta">
                        <div class="dashboard-hero-chip">
                            <i class="fas fa-store"></i>
                            <span th:text="${restaurants != null ? restaurants.size() : 0} + ' nh√† h√†ng ƒëang qu·∫£n l√Ω'">0 nh√† h√†ng ƒëang qu·∫£n l√Ω</span>
                        </div>
                        <div class="dashboard-hero-chip">
                            <i class="fas fa-chair"></i>
                            <span th:text="${availableTables != null ? availableTables.size() : 0} + ' b√†n tr·ªëng'">0 b√†n tr·ªëng</span>
                        </div>
                        <div class="dashboard-hero-chip">
                            <i class="fas fa-clock"></i>
                            <span th:text="${waitingCustomers != null ? waitingCustomers.size() : 0} + ' kh√°ch ƒëang ch·ªù'">0 kh√°ch ƒëang ch·ªù</span>
                        </div>
                    </div>
                    <div class="dashboard-tabs">
                        <a th:href="@{/restaurant-owner/dashboard}" class="dashboard-tab active">
                            <i class="fas fa-chart-line"></i>
                            T·ªïng quan
                        </a>
                        <a th:href="@{/restaurant-owner/profile}" class="dashboard-tab">
                            <i class="fas fa-id-card"></i>
                            H·ªì s∆°
                        </a>
                        <a th:if="${primaryRestaurant != null}"
                           th:href="@{'/restaurant-owner/restaurants/' + ${primaryRestaurant.restaurantId} + '/tables'}"
                           class="dashboard-tab">
                            <i class="fas fa-chair"></i>
                            B√†n
                        </a>
                        <span th:if="${primaryRestaurant == null}" class="dashboard-tab disabled">
                            <i class="fas fa-chair"></i>
                            B√†n
                        </span>
                        <a th:href="@{/restaurant-owner/bookings}" class="dashboard-tab">
                            <i class="fas fa-book-open"></i>
                            Booking
                        </a>
                        <a th:href="@{/restaurant-owner/waitlist}" class="dashboard-tab">
                            <i class="fas fa-user-clock"></i>
                            Waitlist
                        </a>
                        <a th:href="@{/restaurant-owner/vouchers}" class="dashboard-tab">
                            <i class="fas fa-ticket-alt"></i>
                            Voucher
                        </a>
                        <a th:href="@{/restaurant-owner/media}" class="dashboard-tab">
                            <i class="fas fa-camera"></i>
                            Media
                        </a>
                        <a th:href="@{/restaurant-owner/withdrawal}" class="dashboard-tab">
                            <i class="fas fa-wallet"></i>
                            R√∫t ti·ªÅn
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <section class="dashboard-main-section">
            <div class="ds-container ds-flex ds-flex-col ds-gap-6">
                <div th:if="${error != null}" class="ds-card ds-border ds-border-error ds-card-emphasis">
                    <div class="ds-card-body ds-flex ds-flex-col ds-gap-4">
                        <div class="ds-flex ds-gap-3 ds-items-center">
                            <span class="dashboard-pill primary"><i class="fas fa-exclamation-triangle"></i>L·ªói</span>
                            <h2 class="ds-heading-4 ds-text-error ds-mb-0">Kh√¥ng th·ªÉ t·∫£i d·ªØ li·ªáu</h2>
                        </div>
                        <p class="ds-text-base ds-text-secondary" th:text="${error}">C√≥ l·ªói x·∫£y ra, vui l√≤ng t·∫°o nh√† h√†ng tr∆∞·ªõc khi truy c·∫≠p dashboard.</p>
                        <div class="ds-flex ds-gap-3">
                            <a th:href="@{/restaurant-owner/profile}" class="ds-btn ds-btn-primary">
                                <i class="fas fa-plus-circle"></i>
                                T·∫°o nh√† h√†ng
                            </a>
                            <a th:href="@{/restaurant-owner/dashboard}" class="ds-btn ds-btn-secondary">
                                <i class="fas fa-sync-alt"></i>
                                Th·ª≠ l·∫°i
                            </a>
                        </div>
                    </div>
                </div>

                <div th:if="${error == null}" class="ds-flex ds-flex-col ds-gap-6">
                    <div th:if="${restaurants != null and !#lists.isEmpty(restaurants)}" class="ds-card ds-card-elevated">
                        <div class="ds-card-body ds-flex ds-flex-col ds-gap-4">
                            <div class="dashboard-card-header">
                                <h2 class="ds-heading-4 ds-mb-0"><i class="fas fa-store me-2 text-primary"></i>Nh√† h√†ng ƒëang qu·∫£n l√Ω</h2>
                            </div>
                            <div class="dashboard-restaurant-grid">
                                <div th:each="restaurant : ${restaurants}" class="dashboard-restaurant-card">
                                    <div>
                                        <h3 class="ds-heading-5 ds-mb-1" th:text="${restaurant.restaurantName}">Nh√† h√†ng ABC</h3>
                                        <p class="dashboard-restaurant-meta ds-mb-0"
                                           th:text="${restaurant.cuisineType != null ? restaurant.cuisineType : 'Ch∆∞a c·∫≠p nh·∫≠t lo·∫°i h√¨nh'}">
                                            Vi·ªát Nam
                                        </p>
                                    </div>
                                    <div class="dashboard-actions">
                                        <a th:href="@{/restaurant-owner/restaurants/{id}/bookings(id=${restaurant.restaurantId})}"
                                           class="ds-btn ds-btn-secondary ds-btn-compact">
                                            <i class="fas fa-list-ul me-1"></i>Booking
                                        </a>
                                        <a th:href="@{/restaurant-owner/restaurants/{id}/services(id=${restaurant.restaurantId})}"
                                           class="ds-btn ds-btn-secondary ds-btn-compact">
                                            <i class="fas fa-concierge-bell me-1"></i>D·ªãch v·ª•
                                        </a>
                                        <a th:href="@{/restaurant-owner/profile/{id}(id=${restaurant.restaurantId})}"
                                           class="ds-btn ds-btn-tertiary ds-btn-compact">
                                            <i class="fas fa-cog me-1"></i>Qu·∫£n l√Ω
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="ds-card ds-card-elevated">
                        <div class="ds-card-body ds-flex ds-flex-col ds-gap-4">
                            <h2 class="ds-heading-4 ds-mb-0"><i class="fas fa-signal me-2 text-primary"></i>Ch·ªâ s·ªë ho·∫°t ƒë·ªông h√¥m nay</h2>
                            <div class="dashboard-stat-grid">
                                <div class="dashboard-stat-card primary">
                                    <div class="dashboard-stat-icon"><i class="fas fa-calendar-day"></i></div>
                                    <div class="dashboard-stat-value" th:text="${todayBookings != null ? todayBookings.size() : 0}">0</div>
                                    <div class="dashboard-stat-label">Booking h√¥m nay</div>
                                </div>
                                <div class="dashboard-stat-card success">
                                    <div class="dashboard-stat-icon"><i class="fas fa-check-circle"></i></div>
                                    <div class="dashboard-stat-value" th:text="${availableTables != null ? availableTables.size() : 0}">0</div>
                                    <div class="dashboard-stat-label">B√†n tr·ªëng</div>
                                </div>
                                <div class="dashboard-stat-card warning">
                                    <div class="dashboard-stat-icon"><i class="fas fa-utensils"></i></div>
                                    <div class="dashboard-stat-value" th:text="${occupiedTables != null ? occupiedTables.size() : 0}">0</div>
                                    <div class="dashboard-stat-label">B√†n ƒëang ph·ª•c v·ª•</div>
                                </div>
                                <div class="dashboard-stat-card danger">
                                    <div class="dashboard-stat-icon"><i class="fas fa-user-clock"></i></div>
                                    <div class="dashboard-stat-value" th:text="${waitingCustomers != null ? waitingCustomers.size() : 0}">0</div>
                                    <div class="dashboard-stat-label">Kh√°ch ch·ªù</div>
                                </div>
                                <div class="dashboard-stat-card accent">
                                    <div class="dashboard-stat-icon"><i class="fas fa-phone-volume"></i></div>
                                    <div class="dashboard-stat-value" th:text="${calledCustomers != null ? calledCustomers.size() : 0}">0</div>
                                    <div class="dashboard-stat-label">ƒê√£ g·ªçi</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="ds-card ds-card-elevated">
                        <div class="ds-card-body ds-flex ds-flex-col ds-gap-4">
                            <h2 class="ds-heading-4 ds-mb-0"><i class="fas fa-bolt me-2 text-primary"></i>Thao t√°c nhanh</h2>
                            <div class="dashboard-quick-actions">
                                <a th:href="@{/restaurant-owner/withdrawal}" class="dashboard-quick-link">
                                    <strong><i class="fas fa-wallet me-2 text-success"></i>Qu·∫£n l√Ω r√∫t ti·ªÅn</strong>
                                    <span>Ki·ªÉm tra s·ªë d∆∞ v√† th·ª±c hi·ªán l·ªánh r√∫t nhanh ch√≥ng.</span>
                                </a>
                                <a th:href="@{/restaurant-owner/bookings/create}" class="dashboard-quick-link">
                                    <strong><i class="fas fa-clipboard-list me-2 text-primary"></i>T·∫°o booking m·ªõi</strong>
                                    <span>ƒê·∫∑t ch·ªó th·ªß c√¥ng cho kh√°ch h√†ng th√¢n thi·∫øt.</span>
                                </a>
                                <a th:if="${defaultRestaurant != null}"
                                   th:href="@{'/restaurant-owner/restaurants/' + ${defaultRestaurant.restaurantId} + '/tables/create'}"
                                   class="dashboard-quick-link">
                                    <strong><i class="fas fa-chair me-2 text-primary"></i>Th√™m b√†n m·ªõi</strong>
                                    <span>C·∫≠p nh·∫≠t s∆° ƒë·ªì ch·ªó ng·ªìi ƒë·ªÉ t·ªëi ∆∞u ph·ª•c v·ª•.</span>
                                </a>
                                <div th:if="${defaultRestaurant == null}" class="dashboard-quick-link" style="opacity:0.5; pointer-events:none;">
                                    <strong><i class="fas fa-chair me-2 text-primary"></i>Th√™m b√†n m·ªõi</strong>
                                    <span>C·∫ßn t·∫°o nh√† h√†ng tr∆∞·ªõc khi th√™m b√†n.</span>
                                </div>
                                <a th:href="@{/restaurant-owner/dishes/create}" class="dashboard-quick-link">
                                    <strong><i class="fas fa-utensils me-2 text-danger"></i>Th√™m m√≥n ƒÉn</strong>
                                    <span>L√†m m·ªõi th·ª±c ƒë∆°n v·ªõi nh·ªØng m√≥n ƒë·∫∑c s·∫Øc.</span>
                                </a>
                                <a th:href="@{/restaurant-owner/media}" class="dashboard-quick-link">
                                    <strong><i class="fas fa-camera me-2 text-primary"></i>Qu·∫£n l√Ω media</strong>
                                    <span>C·∫≠p nh·∫≠t h√¨nh ·∫£nh kh√¥ng gian v√† m√≥n ƒÉn c·ªßa nh√† h√†ng.</span>
                                </a>
                                <a th:href="@{/restaurant-owner/vouchers}" class="dashboard-quick-link">
                                    <strong><i class="fas fa-ticket-alt me-2 text-warning"></i>Voucher & ∆∞u ƒë√£i</strong>
                                    <span>T·∫°o ch∆∞∆°ng tr√¨nh khuy·∫øn m√£i ƒë·ªÉ thu h√∫t kh√°ch.</span>
                                </a>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-two-column">
                        <div class="ds-card ds-card-elevated">
                            <div class="ds-card-body ds-flex ds-flex-col ds-gap-4">
                                <div class="dashboard-card-header">
                                    <h2 class="ds-heading-4 ds-mb-0">üìÖ Booking h√¥m nay</h2>
                                </div>
                                <div th:if="${todayBookings != null and !todayBookings.isEmpty()}">
                                    <div th:each="booking : ${todayBookings}" class="dashboard-booking-item">
                                        <div class="dashboard-booking-header">
                                            <span class="ds-heading-6" th:text="${booking.customer?.fullName ?: 'Kh√°ch h√†ng'}">Nguy·ªÖn VƒÉn A</span>
                                            <span class="dashboard-status info" th:text="${#temporals.format(booking.bookingTime, 'HH:mm')}">18:00</span>
                                        </div>
                                        <div class="dashboard-booking-meta">
                                            <span>üë• <strong th:text="${booking.numberOfGuests}">4</strong> kh√°ch</span>
                                            <span>üì± <span th:text="${booking.customer?.phone ?: '‚Äî'}">0123456789</span></span>
                                            <span class="dashboard-status warning" th:text="${booking.status}">PENDING</span>
                                        </div>
                                    </div>
                                </div>
                                <div th:if="${todayBookings == null or todayBookings.isEmpty()}" class="dashboard-empty-state">
                                    <div class="fs-2">üì≠</div>
                                    <p class="ds-text-base ds-mb-0">Ch∆∞a c√≥ booking n√†o trong ng√†y h√¥m nay.</p>
                                    <a th:href="@{/restaurant-owner/bookings/create}" class="ds-btn ds-btn-primary">
                                        <i class="fas fa-plus-circle"></i> T·∫°o booking m·ªõi
                                    </a>
                                </div>
                            </div>
                        </div>

                        <div class="ds-card ds-card-elevated">
                            <div class="ds-card-body ds-flex ds-flex-col ds-gap-4">
                                <div class="dashboard-card-header">
                                    <h2 class="ds-heading-4 ds-mb-0">‚úÖ B√†n ƒëang tr·ªëng</h2>
                                </div>
                                <div th:if="${availableTables != null and !availableTables.isEmpty()}
                                    class="dashboard-table-grid">
                                    <div th:each="table : ${availableTables}" class="dashboard-table-card">
                                        <strong th:text="${table.tableName}">T1</strong>
                                        <div>üë• <span th:text="${table.capacity}">4</span> ch·ªó ng·ªìi</div>
                                        <span class="dashboard-status success">Tr·ªëng</span>
                                    </div>
                                </div>
                                <div th:if="${availableTables == null or availableTables.isEmpty()}" class="dashboard-empty-state">
                                    <div class="fs-2">ü™ë</div>
                                    <p class="ds-text-base ds-mb-0">Kh√¥ng c√≥ b√†n tr·ªëng v√†o l√∫c n√†y.</p>
                                    <a th:if="${defaultRestaurant != null}"
                                       th:href="@{'/restaurant-owner/restaurants/' + ${defaultRestaurant.restaurantId} + '/tables'}"
                                       class="ds-btn ds-btn-secondary">
                                        <i class="fas fa-chair"></i> Qu·∫£n l√Ω b√†n
                                    </a>
                                    <span th:if="${defaultRestaurant == null}" class="ds-btn ds-btn-secondary disabled" style="pointer-events:none; opacity:0.5;">
                                        <i class="fas fa-chair"></i> Qu·∫£n l√Ω b√†n
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="ds-card ds-card-elevated">
                        <div class="ds-card-body ds-flex ds-flex-col ds-gap-4">
                            <div class="dashboard-card-header">
                                <h2 class="ds-heading-4 ds-mb-0">‚è∞ Qu·∫£n l√Ω danh s√°ch ch·ªù</h2>
                                <div class="ds-flex ds-gap-2">
                                    <button type="button" class="ds-btn ds-btn-primary" onclick="callNextCustomer()">
                                        <i class="fas fa-phone"></i> G·ªçi kh√°ch ti·∫øp theo
                                    </button>
                                    <button type="button" class="ds-btn ds-btn-secondary" onclick="refreshWaitlist()">
                                        <i class="fas fa-sync"></i> L√†m m·ªõi
                                    </button>
                                </div>
                            </div>
                            <div class="dashboard-waitlist-grid">
                                <div class="waitlist-panel">
                                    <h3 class="ds-heading-5 ds-mb-0">üë• Kh√°ch ƒëang ch·ªù (<span th:text="${waitingCustomers != null ? waitingCustomers.size() : 0}">0</span>)</h3>
                                    <div th:if="${waitingCustomers != null and !waitingCustomers.isEmpty()}">
                                        <div th:each="waitlist, iterStat : ${waitingCustomers}" class="waitlist-item">
                                            <div class="waitlist-info">
                                                <div class="ds-heading-6 ds-mb-1" th:text="${waitlist.customer.user.fullName}">Nguy·ªÖn VƒÉn A</div>
                                                <div class="waitlist-details">
                                                    <span>üë• <strong th:text="${waitlist.partySize}">4</strong> kh√°ch</span>
                                                    <span>‚è∞ <span th:text="${#temporals.format(waitlist.joinTime, 'HH:mm')}">18:00</span></span>
                                                    <span>#<span th:text="${iterStat.index + 1}">1</span></span>
                                                </div>
                                            </div>
                                            <div class="waitlist-actions">
                                                <button type="button" class="ds-btn ds-btn-secondary ds-btn-compact"
                                                        th:onclick="'callCustomer(' + ${waitlist.waitlistId} + ')'">
                                                    <i class="fas fa-phone"></i> G·ªçi
                                                </button>
                                                <button type="button" class="ds-btn ds-btn-primary ds-btn-compact"
                                                        th:onclick="'seatCustomer(' + ${waitlist.waitlistId} + ')'">
                                                    <i class="fas fa-chair"></i> X·∫øp ch·ªó
                                                </button>
                                                <button type="button" class="ds-btn ds-btn-tertiary ds-btn-compact"
                                                        th:onclick="'cancelWaitlist(' + ${waitlist.waitlistId} + ')'">
                                                    <i class="fas fa-times"></i> H·ªßy
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div th:if="${waitingCustomers == null or waitingCustomers.isEmpty()}" class="dashboard-empty-state ds-m-0">
                                        <div class="fs-2">ü§ù</div>
                                        <p class="ds-text-base ds-mb-0">Kh√¥ng c√≥ kh√°ch h√†ng n√†o trong danh s√°ch ch·ªù.</p>
                                    </div>
                                </div>
                                <div class="waitlist-panel">
                                    <h3 class="ds-heading-5 ds-mb-0">üìû Kh√°ch ƒë√£ g·ªçi (<span th:text="${calledCustomers != null ? calledCustomers.size() : 0}">0</span>)</h3>
                                    <div th:if="${calledCustomers != null and !calledCustomers.isEmpty()}">
                                        <div th:each="waitlist : ${calledCustomers}" class="waitlist-item called">
                                            <div class="waitlist-info">
                                                <div class="ds-heading-6 ds-mb-1" th:text="${waitlist.customer.user.fullName}">Nguy·ªÖn VƒÉn A</div>
                                                <div class="waitlist-details">
                                                    <span>üë• <strong th:text="${waitlist.partySize}">4</strong> kh√°ch</span>
                                                    <span>üìû ƒê√£ g·ªçi l√∫c <span th:text="${#temporals.format(waitlist.joinTime, 'HH:mm')}">18:00</span></span>
                                                </div>
                                            </div>
                                            <div class="waitlist-actions">
                                                <button type="button" class="ds-btn ds-btn-primary ds-btn-compact"
                                                        th:onclick="'seatCustomer(' + ${waitlist.waitlistId} + ')'">
                                                    <i class="fas fa-chair"></i> X·∫øp ch·ªó
                                                </button>
                                                <button type="button" class="ds-btn ds-btn-tertiary ds-btn-compact"
                                                        th:onclick="'cancelWaitlist(' + ${waitlist.waitlistId} + ')'">
                                                    <i class="fas fa-times"></i> H·ªßy
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div th:if="${calledCustomers == null or calledCustomers.isEmpty()}" class="dashboard-empty-state ds-m-0">
                                        <div class="fs-2">‚òéÔ∏è</div>
                                        <p class="ds-text-base ds-mb-0">Ch∆∞a c√≥ kh√°ch h√†ng n√†o ƒë∆∞·ª£c li√™n h·ªá g·∫ßn ƒë√¢y.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div th:if="${occupiedTables != null and !occupiedTables.isEmpty()}" class="ds-card ds-card-elevated">
                        <div class="ds-card-body ds-flex ds-flex-col ds-gap-4">
                            <div class="dashboard-card-header">
                                <h2 class="ds-heading-4 ds-mb-0">üçΩÔ∏è B√†n ƒëang ph·ª•c v·ª•</h2>
                            </div>
                            <div class="dashboard-table-grid">
                                <div th:each="table : ${occupiedTables}" class="dashboard-table-card">
                                    <strong th:text="${table.tableName}">T2</strong>
                                    <div>üë• <span th:text="${table.capacity}">2</span> ch·ªó ng·ªìi</div>
                                    <span class="dashboard-status warning">ƒêang s·ª≠ d·ª•ng</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <footer class="ds-dashboard-footer">
                    ¬© <span th:text="${#temporals.format(#temporals.createNow(), 'yyyy')}">2025</span> Book Eat ‚Äì ƒê·ªìng h√†nh c√πng ch·ªß nh√† h√†ng n√¢ng t·∫ßm tr·∫£i nghi·ªám.
                </footer>
            </div>
        </section>
    </main>

    <div th:replace="~{fragments/design-system-components :: unified-footer}"></div>
    <div th:replace="~{fragments/resy-scripts :: basic-scripts}"></div>

    <script>
        setTimeout(function() {
            location.reload();
        }, 60000);

        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });
        function callNextCustomer() {
            if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën g·ªçi kh√°ch h√†ng ti·∫øp theo?')) {
                const restaurantId = '[[${restaurants != null and !#lists.isEmpty(restaurants) ? restaurants[0].restaurantId : ''}]]';
                if (!restaurantId) {
                    alert('Kh√¥ng t√¨m th·∫•y nh√† h√†ng!');
                    return;
                }

                const form = document.createElement('form');
                form.method = 'POST';
                form.action = '/restaurant-owner/waitlist/call-next';

                const restaurantIdInput = document.createElement('input');
                restaurantIdInput.type = 'hidden';
                restaurantIdInput.name = 'restaurantId';
                restaurantIdInput.value = restaurantId;

                form.appendChild(restaurantIdInput);
                document.body.appendChild(form);
                form.submit();
            }
        }

        function callCustomer(waitlistId) {
            if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën g·ªçi kh√°ch h√†ng n√†y?')) {
                callNextCustomer();
            }
        }

        function seatCustomer(waitlistId) {
            if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x·∫øp ch·ªó cho kh√°ch h√†ng n√†y?')) {
                const form = document.createElement('form');
                form.method = 'POST';
                form.action = '/restaurant-owner/waitlist/seat/' + waitlistId;

                document.body.appendChild(form);
                form.submit();
            }
        }

        function cancelWaitlist(waitlistId) {
            if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën h·ªßy danh s√°ch ch·ªù n√†y?')) {
                const form = document.createElement('form');
                form.method = 'POST';
                form.action = '/restaurant-owner/waitlist/cancel/' + waitlistId;

                document.body.appendChild(form);
                form.submit();
            }
        }

        function refreshWaitlist() {
            location.reload();
        }

        setInterval(function() {
            // C√≥ th·ªÉ b·ªï sung refresh b·∫•t ƒë·ªìng b·ªô t·∫°i ƒë√¢y
        }, 30000);
    </script>
</body>
</html>
