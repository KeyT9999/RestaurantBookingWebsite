<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title th:text="${pageTitle}">T·∫°o nh√† h√†ng m·ªõi</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Dashboard CSS -->
    <link th:href="@{/css/dashboard.css}" rel="stylesheet" />
    
    <style>
        .restaurant-form-page {
            background: var(--dashboard-light-gray);
            min-height: 100vh;
            padding-bottom: 2rem;
        }

        .form-section {
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid var(--dashboard-border);
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .form-section:first-of-type {
            margin-top: 0;
            border-top: none;
            padding-top: 0;
        }

        .form-section-header h2 {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--dashboard-black);
            margin-bottom: 0.5rem;
        }

        .form-section-header p {
            color: var(--dashboard-gray);
            max-width: 720px;
            font-size: 0.95rem;
            margin: 0;
        }

        .form-item {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .form-label {
            font-weight: 500;
            color: var(--dashboard-black);
            font-size: 0.9rem;
        }

        .form-item input,
        .form-item textarea,
        .form-item select {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid var(--dashboard-border);
            border-radius: 8px;
            font-size: 0.95rem;
            font-family: var(--font-family-primary);
            transition: all 0.2s ease;
            background: var(--dashboard-white);
            color: var(--dashboard-black);
        }

        .form-item input:focus,
        .form-item textarea:focus,
        .form-item select:focus {
            outline: none;
            border-color: var(--dashboard-accent);
            box-shadow: 0 0 0 3px rgba(55, 65, 81, 0.1);
        }

        .form-item textarea.long-text {
            min-height: 160px;
            resize: vertical;
        }

        .form-card {
            background: var(--dashboard-white);
            border: 1px solid var(--dashboard-border);
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(15, 23, 42, 0.08);
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .form-header {
            margin-bottom: 2rem;
        }

        .form-header h1 {
            font-size: 2rem;
            font-weight: 600;
            color: var(--dashboard-black);
            margin-bottom: 0.5rem;
        }

        .form-header p {
            color: var(--dashboard-gray);
            font-size: 0.95rem;
            margin: 0;
        }

        .breadcrumb-nav {
            background: var(--dashboard-white);
            border-bottom: 1px solid var(--dashboard-border);
            padding: 1rem 0;
            margin-bottom: 2rem;
        }

        .breadcrumb-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .breadcrumb-nav a {
            color: var(--dashboard-gray);
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .breadcrumb-nav a:hover {
            color: var(--dashboard-black);
        }

        .breadcrumb-nav .nav-separator {
            color: var(--dashboard-border);
            margin: 0 0.5rem;
        }

        .breadcrumb-nav .nav-current {
            color: var(--dashboard-black);
            font-weight: 500;
        }

        .form-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .alert {
            padding: 1rem 1.5rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            font-size: 0.95rem;
        }

        .alert-success {
            background: #D1FAE5;
            color: #065F46;
            border: 1px solid #10B981;
        }

        .alert-danger {
            background: #FEE2E2;
            color: #991B1B;
            border: 1px solid #DC2626;
        }

        .grid {
            display: grid;
            gap: 1.5rem;
        }

        .grid-2 {
            grid-template-columns: repeat(2, 1fr);
        }

        .grid-3 {
            grid-template-columns: repeat(3, 1fr);
        }

        .full {
            grid-column: 1 / -1;
        }

        .actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid var(--dashboard-border);
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 500;
            font-size: 0.95rem;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: var(--dashboard-black);
            color: var(--dashboard-white);
        }

        .btn-primary:hover {
            background: var(--dashboard-accent);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .btn-ghost {
            background: transparent;
            color: var(--dashboard-black);
            border: 1px solid var(--dashboard-border);
        }

        .btn-ghost:hover {
            background: var(--dashboard-light-gray);
            border-color: var(--dashboard-accent);
        }

        .terms-content {
            margin-bottom: 1.5rem;
            color: var(--dashboard-gray);
        }

        .terms-content ul {
            margin: 1rem 0;
            padding-left: 1.5rem;
        }

        .terms-content li {
            margin-bottom: 0.5rem;
        }

        .checkbox-item {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            cursor: pointer;
        }

        .checkbox-item input[type="checkbox"] {
            margin-top: 0.25rem;
            cursor: pointer;
        }

        .checkbox-label {
            color: var(--dashboard-black);
            font-size: 0.95rem;
        }

        .checkbox-label a {
            color: var(--dashboard-black);
            text-decoration: underline;
        }

        @media (max-width: 1024px) {
            .grid-3 {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .grid-2,
            .grid-3 {
                grid-template-columns: 1fr;
            }

            .form-container {
                padding: 0 1rem;
            }

            .form-card {
                padding: 1.5rem;
            }
        }
    </style>
</head>
<body class="restaurant-form-page">
    <!-- Breadcrumb Navigation -->
    <nav class="breadcrumb-nav">
        <div class="breadcrumb-content">
            <div style="display: flex; align-items: center; gap: 0.5rem;">
                <a th:href="@{/}">‚Üê Trang ch·ªß</a>
                <span class="nav-separator">|</span>
                <a th:href="@{/restaurant-owner/profile}">H·ªì s∆° Nh√† h√†ng</a>
                <span class="nav-separator">|</span>
                <span class="nav-current" th:text="${pageTitle}">T·∫°o nh√† h√†ng m·ªõi</span>
            </div>
        </div>
    </nav>

    <div class="form-container">
        <!-- Flash Messages -->
        <div th:if="${success}" class="alert alert-success" th:text="${success}"></div>
        <div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>

        <!-- Form Header -->
        <div class="form-card">
            <div class="form-header">
                <h1 th:text="${pageTitle}">T·∫°o nh√† h√†ng m·ªõi</h1>
                <p>ƒêi·ªÅn th√¥ng tin chi ti·∫øt v·ªÅ nh√† h√†ng c·ªßa b·∫°n</p>
            </div>

            <form th:action="${restaurant.restaurantId != null ? '/restaurant-owner/restaurants/' + restaurant.restaurantId + '/edit' : '/restaurant-owner/restaurants/create'}" 
                  th:object="${restaurant}" 
                  method="post" 
                  enctype="multipart/form-data">
                
                <div class="grid grid-3">
                    <!-- Basic Information -->
                    <div class="form-item">
                        <span class="form-label">T√™n nh√† h√†ng *</span>
                        <input type="text" th:field="*{restaurantName}" placeholder="Nh·∫≠p t√™n nh√† h√†ng" required />
                    </div>
                    
                    <div class="form-item">
                        <span class="form-label">S·ªë ƒëi·ªán tho·∫°i</span>
                        <input type="tel" th:field="*{phone}" placeholder="0123 456 789" />
                    </div>
                    
                    <div class="form-item">
                        <span class="form-label">Website</span>
                        <input type="url" th:field="*{websiteUrl}" placeholder="https://example.com" />
                    </div>
                    
                    <div class="form-item full">
                        <span class="form-label">ƒê·ªãa ch·ªâ</span>
                        <input type="text" th:field="*{address}" placeholder="123 ƒê∆∞·ªùng ABC, Qu·∫≠n 1, TP.HCM" />
                    </div>
                    
                    <div class="form-item">
                        <span class="form-label">Lo·∫°i ·∫©m th·ª±c</span>
                        <input type="text" th:field="*{cuisineType}" placeholder="Vietnamese, Italian, Chinese..." />
                    </div>
                    
                    <div class="form-item">
                        <span class="form-label">Gi·ªù m·ªü c·ª≠a</span>
                        <input type="text" th:field="*{openingHours}" placeholder="10:00 - 22:00" />
                    </div>
                    
                    <div class="form-item">
                        <span class="form-label">Gi√° trung b√¨nh (VNƒê)</span>
                        <input type="number" th:field="*{averagePrice}" placeholder="100000" min="0" step="1000" />
                    </div>
                    
                    <div class="form-item full">
                        <span class="form-label">M√¥ t·∫£ ng·∫Øn</span>
                        <textarea th:field="*{description}" rows="3" placeholder="M√¥ t·∫£ ng·∫Øn g·ªçn v·ªÅ nh√† h√†ng..."></textarea>
                    </div>
                    
                    <div class="form-item">
                        <span class="form-label">Gi√° th·∫•p nh·∫•t (VNƒê)</span>
                        <input type="number" th:field="*{priceRangeMin}" placeholder="80000" min="0" step="1000" />
                    </div>
                    
                    <div class="form-item">
                        <span class="form-label">Gi√° cao nh·∫•t (VNƒê)</span>
                        <input type="number" th:field="*{priceRangeMax}" placeholder="290000" min="0" step="1000" />
                    </div>
                    
                    <div class="form-item">
                        <span class="form-label">Th√¥ng b√°o tr·∫°ng th√°i m·ªü c·ª≠a</span>
                        <input type="text" th:field="*{statusMessage}" placeholder="ƒêang m·ªü c·ª≠a: 10:30 - 22:00" />
                    </div>
                </div>

                <div class="form-section">
                    <div class="form-section-header">
                        <h2>Thi·∫øt l·∫≠p hi·ªÉn th·ªã &amp; li√™n h·ªá</h2>
                        <p>ƒêi·ªÅn th√¥ng tin hero v√† hotline ƒë·ªÉ kh√°ch h√†ng nhanh ch√≥ng n·∫Øm b·∫Øt th√¥ng tin quan tr·ªçng c·ªßa nh√† h√†ng.</p>
                    </div>
                    <div class="grid grid-3">
                        <div class="form-item">
                            <span class="form-label">Th√†nh ph·ªë hi·ªÉn th·ªã</span>
                            <input type="text" th:field="*{heroCity}" placeholder="ƒê√† N·∫µng" />
                        </div>
                        
                        <div class="form-item">
                            <span class="form-label">Ti√™u ƒë·ªÅ hero</span>
                            <input type="text" th:field="*{heroHeadline}" placeholder="B·∫°n mu·ªën ƒë·∫∑t ch·ªó ƒë·∫øn ƒë√¢u" />
                        </div>
                        
                        <div class="form-item">
                            <span class="form-label">Th√¥ng ƒëi·ªáp b·ªï sung</span>
                            <input type="text" th:field="*{heroSubheadline}" placeholder="Kh√°m ph√° nh·ªØng tr·∫£i nghi·ªám ·∫©m th·ª±c t·ªët nh·∫•t" />
                        </div>
                        
                        <div class="form-item">
                            <span class="form-label">Placeholder √¥ t√¨m ki·∫øm</span>
                            <input type="text" th:field="*{heroSearchPlaceholder}" placeholder="T√¨m ki·∫øm nh√† h√†ng, m√≥n ƒÉn, ∆∞u ƒë√£i..." />
                        </div>
                        
                        <div class="form-item">
                            <span class="form-label">Hotline ƒë·∫∑t ch·ªó</span>
                            <input type="text" th:field="*{contactHotline}" placeholder="1900 6005" />
                        </div>
                        
                        <div class="form-item">
                            <span class="form-label">ƒêi·ªán tho·∫°i li√™n h·ªá b·ªï sung</span>
                            <input type="text" th:field="*{contactSecondaryPhone}" placeholder="085 805 2718" />
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <div class="form-section-header">
                        <h2>Th√¥ng tin ƒë·∫∑t ch·ªó &amp; ∆∞u ƒë√£i</h2>
                        <p>Gi·∫£i th√≠ch r√µ quy tr√¨nh ƒë·∫∑t b√†n, quy ƒë·ªãnh gi·ªØ b√†n v√† c√°c ch∆∞∆°ng tr√¨nh ∆∞u ƒë√£i ƒëang √°p d·ª•ng.</p>
                    </div>
                    <div class="grid grid-2">
                        <div class="form-item full">
                            <span class="form-label">Th√¥ng tin ƒë·∫∑t ch·ªó chi ti·∫øt</span>
                            <textarea th:field="*{bookingInformation}" class="long-text" placeholder="I. ƒê·∫∑t ch·ªó PasGo: T∆∞ v·∫•n - Gi·ªØ ch·ªó&#10;- Qu√Ω kh√°ch vui l√≤ng ƒë·∫∑t ch·ªó tr∆∞·ªõc √≠t nh·∫•t 01 ti·∫øng..."></textarea>
                        </div>
                        
                        <div class="form-item full">
                            <span class="form-label">Ghi ch√∫ ƒë·∫∑t ch·ªó / ch√≠nh s√°ch</span>
                            <textarea th:field="*{bookingNotes}" class="long-text" placeholder="Nh√† h√†ng xin gi·ªØ b√†n trong v√≤ng 15 ph√∫t..."></textarea>
                        </div>
                        
                        <div class="form-item">
                            <span class="form-label">∆Øu ƒë√£i chung</span>
                            <textarea th:field="*{generalPromotions}" class="long-text" placeholder="∆Øu ƒë√£i 1: Gi·∫£m 15% t·ª´ th·ª© 2..."></textarea>
                        </div>
                        
                        <div class="form-item">
                            <span class="form-label">∆Øu ƒë√£i d√†nh cho nh√≥m</span>
                            <textarea th:field="*{groupPromotions}" class="long-text" placeholder="∆Øu ƒë√£i 2: Gi·∫£m 10% cho nh√≥m t·ª´ 10 ng∆∞·ªùi..."></textarea>
                        </div>
                        
                        <div class="form-item full">
                            <span class="form-label">Ghi ch√∫ v·ªÅ ∆∞u ƒë√£i</span>
                            <textarea th:field="*{promotionNotes}" class="long-text" placeholder="*∆Øu ƒë√£i ƒë∆∞·ª£c ph√©p c·ªông d·ªìn..."></textarea>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <div class="form-section-header">
                        <h2>T·ªïng quan &amp; ƒëi·ªÉm n·ªïi b·∫≠t</h2>
                        <p>M√¥ t·∫£ ƒëi·ªÉm m·∫°nh, m√≥n n·ªïi b·∫≠t v√† kh√¥ng gian c·ªßa nh√† h√†ng ƒë·ªÉ tƒÉng s·ª©c thuy·∫øt ph·ª•c.</p>
                    </div>
                    <div class="grid grid-2">
                        <div class="form-item full">
                            <span class="form-label">T√≥m t·∫Øt nh√† h√†ng</span>
                            <textarea th:field="*{summaryHighlights}" class="long-text" placeholder="T√≥m t·∫Øt Thai Market - Y√™n B√°i..."></textarea>
                        </div>
                        
                        <div class="form-item full">
                            <span class="form-label">Ph√π h·ª£p v·ªõi</span>
                            <textarea th:field="*{suitableFor}" class="long-text" placeholder="- T·∫•t c·∫£ c√°c lo·∫°i ti·ªác, ƒÉn gia ƒë√¨nh..."></textarea>
                        </div>
                        
                        <div class="form-item full">
                            <span class="form-label">M√≥n ƒë·∫∑c s·∫Øc</span>
                            <textarea th:field="*{signatureDishes}" class="long-text" placeholder="- Pad Thai, Canh Tomyum, G·ªèi ƒëu ƒë·ªß Somtam..."></textarea>
                        </div>
                        
                        <div class="form-item full">
                            <span class="form-label">Kh√¥ng gian &amp; thi·∫øt k·∫ø</span>
                            <textarea th:field="*{spaceDescriptionDetail}" class="long-text" placeholder="- Truy·ªÅn th·ªëng k·∫øt h·ª£p hi·ªán ƒë·∫°i, s·ª©c ch·ª©a 127 kh√°ch..."></textarea>
                        </div>
                        
                        <div class="form-item full">
                            <span class="form-label">ƒêi·ªÉm ƒë·∫∑c tr∆∞ng</span>
                            <textarea th:field="*{uniqueFeatures}" class="long-text" placeholder="- Kh√°m ph√° ·∫©m th·ª±c ƒë·∫≠m v·ªã Th√°i..."></textarea>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <div class="form-section-header">
                        <h2>Gi√°, menu &amp; quy ƒë·ªãnh</h2>
                        <p>Cung c·∫•p chi ti·∫øt b·∫£ng gi√°, menu n·ªïi b·∫≠t v√† c√°c quy ƒë·ªãnh quan tr·ªçng cho kh√°ch h√†ng.</p>
                    </div>
                    <div class="grid grid-2">
                        <div class="form-item full">
                            <span class="form-label">B·∫£ng gi√° chi ti·∫øt</span>
                            <textarea th:field="*{pricingDetails}" class="long-text" placeholder="B·∫£ng gi√° Thai Market Restaurant - Y√™n B√°i..."></textarea>
                        </div>
                        
                        <div class="form-item full">
                            <span class="form-label">Menu n·ªïi b·∫≠t</span>
                            <textarea th:field="*{menuHighlights}" class="long-text" placeholder="Menu Thai Market - Danh s√°ch m√≥n..."></textarea>
                        </div>
                        
                        <div class="form-item full">
                            <span class="form-label">Quy ƒë·ªãnh &amp; ch√≠nh s√°ch</span>
                            <textarea th:field="*{policyRules}" class="long-text" placeholder="1. Quy ƒë·ªãnh v·ªÅ ƒë·∫∑t c·ªçc..."></textarea>
                        </div>
                        
                        <div class="form-item full">
                            <span class="form-label">Ti·ªán √≠ch &amp; d·ªãch v·ª•</span>
                            <textarea th:field="*{amenities}" class="long-text" placeholder="Ti·ªán √≠ch: Wifi, H√≥a ƒë∆°n VAT, Gh·∫ø tr·∫ª em..."></textarea>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <div class="form-section-header">
                        <h2>Di chuy·ªÉn, ch·ªó ƒë·ªó xe &amp; gi·ªù ho·∫°t ƒë·ªông</h2>
                        <p>Gi√∫p kh√°ch h√†ng d·ªÖ d√†ng l√™n k·∫ø ho·∫°ch di chuy·ªÉn v√† bi·∫øt r√µ th·ªùi gian ph·ª•c v·ª•.</p>
                    </div>
                    <div class="grid grid-2">
                        <div class="form-item full">
                            <span class="form-label">Th√¥ng tin ch·ªó ƒë·ªó xe</span>
                            <textarea th:field="*{parkingDetails}" class="long-text" placeholder="Xe m√°y: ƒë·ªÉ tr∆∞·ªõc c·ª≠a... Xe √¥ t√¥: ƒë·ªó d·ªçc ƒë∆∞·ªùng Y√™n B√°i..."></textarea>
                        </div>
                        
                        <div class="form-item full">
                            <span class="form-label">Ghi ch√∫ th∆∞ vi·ªán ·∫£nh</span>
                            <textarea th:field="*{galleryNotes}" class="long-text" placeholder="H√¨nh ·∫£nh Thai Market Restaurant - b·ªô s∆∞u t·∫≠p..."></textarea>
                        </div>
                        
                        <div class="form-item full">
                            <span class="form-label">Ch·ªâ ƒë∆∞·ªùng</span>
                            <textarea th:field="*{directionInfo}" class="long-text" placeholder="S·ªë 124 ƒê∆∞·ªùng Y√™n B√°i, Ph∆∞·ªõc Ninh, H·∫£i Ch√¢u..."></textarea>
                        </div>
                        
                        <div class="form-item full">
                            <span class="form-label">Gi·ªù ho·∫°t ƒë·ªông chi ti·∫øt</span>
                            <textarea th:field="*{operatingSchedule}" class="long-text" placeholder="Th·ª© hai: 10:30 - 22:00&#10;Th·ª© ba: 10:30 - 22:00..."></textarea>
                        </div>
                    </div>
                </div>
                    
                    <!-- Media Upload -->
                    <div class="form-item full">
                        <span class="form-label">Logo nh√† h√†ng</span>
                        <div class="image-upload-container">
                            <input type="file" id="logo" name="logo" accept="image/*" onchange="previewImage(this, 'logo-preview')" />
                            <div class="image-preview" id="logo-preview">
                                <!-- Hi·ªÉn th·ªã logo hi·ªán t·∫°i n·∫øu c√≥ (edit mode) -->
                                <div th:if="${restaurant.media != null}" th:each="media : ${restaurant.media}">
                                    <div th:if="${media.type == 'logo'}">
                                        <img th:src="${media.url}" alt="Current Logo" style="max-width: 100%; max-height: 200px; border-radius: 4px;">
                                        <div class="current-image-info">
                                            <div class="image-details">
                                                <span class="image-name" th:data-url="${media.url}">logo.jpg</span>
                                                <span class="image-type" th:data-url="${media.url}">jpg</span>
                                            </div>
                                            <div class="image-actions">
                                                <a th:href="${media.url}" target="_blank" class="btn btn-sm btn-primary">Xem ·∫£nh</a>
                                                <button type="button" class="btn btn-sm btn-secondary" onclick="removeCurrentImage('logo', 'logo-preview')">Thay ƒë·ªïi</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Placeholder n·∫øu kh√¥ng c√≥ logo -->
                                <div th:unless="${restaurant.media != null and restaurant.media.?[type == 'logo'].size() > 0}" class="preview-placeholder">
                                    <i class="icon">üì∑</i>
                                    <span>Ch·ªçn logo nh√† h√†ng</span>
                                </div>
                            </div>
                            <small class="muted">PNG, JPG, WebP. T·ªëi ƒëa 20MB</small>
                        </div>
                    </div>
                    
                    <div class="form-item full">
                        <span class="form-label">·∫¢nh b√¨a</span>
                        <div class="image-upload-container">
                            <input type="file" id="cover" name="cover" accept="image/*" onchange="previewImage(this, 'cover-preview')" />
                            <div class="image-preview" id="cover-preview">
                                <!-- Hi·ªÉn th·ªã cover hi·ªán t·∫°i n·∫øu c√≥ (edit mode) -->
                                <div th:if="${restaurant.media != null}" th:each="media : ${restaurant.media}">
                                    <div th:if="${media.type == 'cover'}">
                                        <img th:src="${media.url}" alt="Current Cover" style="max-width: 100%; max-height: 200px; border-radius: 4px;">
                                        <div class="current-image-info">
                                            <div class="image-details">
                                                <span class="image-name" th:data-url="${media.url}">cover.jpg</span>
                                                <span class="image-type" th:data-url="${media.url}">jpg</span>
                                            </div>
                                            <div class="image-actions">
                                                <a th:href="${media.url}" target="_blank" class="btn btn-sm btn-primary">Xem ·∫£nh</a>
                                                <button type="button" class="btn btn-sm btn-secondary" onclick="removeCurrentImage('cover', 'cover-preview')">Thay ƒë·ªïi</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Placeholder n·∫øu kh√¥ng c√≥ cover -->
                                <div th:unless="${restaurant.media != null and restaurant.media.?[type == 'cover'].size() > 0}" class="preview-placeholder">
                                    <i class="icon">üñºÔ∏è</i>
                                    <span>Ch·ªçn ·∫£nh b√¨a</span>
                                </div>
                            </div>
                            <small class="muted">PNG, JPG, WebP. T·ªëi ƒëa 20MB</small>
                        </div>
                    </div>
                    
                    <div class="form-item full">
                        <span class="form-label">Gi·∫•y ph√©p kinh doanh</span>
                        <div class="file-upload-container">
                            <input type="file" id="businessLicense" name="businessLicense" accept=".pdf,image/*" onchange="previewFile(this, 'license-preview')" />
                            <div class="file-preview" id="license-preview">
                                <!-- Hi·ªÉn th·ªã business license hi·ªán t·∫°i n·∫øu c√≥ (edit mode) -->
                                <div th:if="${restaurant.businessLicenseFile != null and !restaurant.businessLicenseFile.isEmpty()}">
                                    <div class="file-info">
                                        <i class="icon">üìÑ</i>
                                        <div class="file-details">
                                            <span class="file-name" th:data-url="${restaurant.businessLicenseFile}">business_license.pdf</span>
                                            <span class="file-type" th:data-url="${restaurant.businessLicenseFile}">pdf</span>
                                        </div>
                                        <div class="file-actions">
                                            <a th:href="${restaurant.businessLicenseFile}" target="_blank" class="btn btn-sm btn-primary">Xem file</a>
                                            <button type="button" class="btn btn-sm btn-secondary" onclick="removeCurrentFile('businessLicense', 'license-preview')">Thay ƒë·ªïi</button>
                                        </div>
                                    </div>
                                </div>
                                <!-- Placeholder n·∫øu kh√¥ng c√≥ business license -->
                                <div th:unless="${restaurant.businessLicenseFile != null and !restaurant.businessLicenseFile.isEmpty()}" class="preview-placeholder">
                                    <i class="icon">üìÑ</i>
                                    <span>Ch·ªçn gi·∫•y ph√©p kinh doanh</span>
                                </div>
                            </div>
                            <small class="muted">PDF, PNG, JPG, WebP. T·ªëi ƒëa 20MB</small>
                        </div>
                    </div>
                </div>
                
                <!-- Terms of Service -->
                <div class="form-section">
                    <div class="form-section-header">
                        <h2>ƒêi·ªÅu kho·∫£n s·ª≠ d·ª•ng</h2>
                    </div>
                    <div class="terms-content">
                        <p>B·∫±ng vi·ªác ƒëƒÉng k√Ω nh√† h√†ng, b·∫°n ƒë·ªìng √Ω v·ªõi c√°c ƒëi·ªÅu kho·∫£n sau:</p>
                        <ul>
                            <li>Th√¥ng tin nh√† h√†ng ph·∫£i ch√≠nh x√°c v√† ƒë·∫ßy ƒë·ªß</li>
                            <li>Tu√¢n th·ªß c√°c quy ƒë·ªãnh v·ªÅ an to√†n th·ª±c ph·∫©m</li>
                            <li>Ch·ªãu tr√°ch nhi·ªám v·ªÅ ch·∫•t l∆∞·ª£ng d·ªãch v·ª•</li>
                            <li>Thanh to√°n ph√≠ d·ªãch v·ª• theo quy ƒë·ªãnh</li>
                        </ul>
                    </div>
                    <label class="checkbox-item">
                        <input type="checkbox" name="termsAccepted" required />
                        <span class="checkbox-label">T√¥i ƒë·ªìng √Ω v·ªõi <a href="#" target="_blank">ƒêi·ªÅu kho·∫£n s·ª≠ d·ª•ng</a> v√† <a href="#" target="_blank">Ch√≠nh s√°ch b·∫£o m·∫≠t</a></span>
                    </label>
                </div>
                
                <!-- Form Actions -->
                <div class="actions">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i>
                        L∆∞u nh√† h√†ng
                    </button>
                    <a th:href="@{/restaurant-owner/profile}" class="btn btn-ghost">
                        <i class="fas fa-times"></i>
                        H·ªßy
                    </a>
                </div>
            </form>
        </div>
    </div>

    <style>
        /* Image Upload Styles - Design System */
        .image-upload-container {
            margin-bottom: 1rem;
        }
        
        .image-upload-container input[type="file"] {
            display: none;
        }
        
        .image-preview {
            border: 2px dashed var(--dashboard-border);
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--dashboard-white);
        }
        
        .image-preview:hover {
            border-color: var(--dashboard-accent);
            background-color: var(--dashboard-light-gray);
        }
        
        .preview-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            color: var(--dashboard-gray);
        }
        
        .preview-placeholder .icon {
            font-size: 2rem;
        }
        
        .image-preview img {
            max-width: 100%;
            max-height: 200px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(15, 23, 42, 0.1);
        }
        
        .file-upload-container {
            margin-bottom: 1rem;
        }
        
        .file-upload-container input[type="file"] {
            display: none;
        }
        
        .file-preview {
            border: 2px dashed var(--dashboard-border);
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--dashboard-white);
        }
        
        .file-preview:hover {
            border-color: var(--dashboard-accent);
            background-color: var(--dashboard-light-gray);
        }
        
        .file-preview .file-info {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            color: var(--dashboard-gray);
        }
        
        .file-preview .file-info .icon {
            font-size: 2rem;
        }
        
        /* Current file/image info styles */
        .current-image-info, .file-info {
            position: relative;
            background: var(--dashboard-accent);
            color: var(--dashboard-white);
            padding: 1rem;
            border-radius: 8px;
            margin-top: 10px;
        }
        
        .image-details, .file-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .image-name, .file-name {
            font-weight: 500;
            font-size: 0.9rem;
        }
        
        .image-type, .file-type {
            background: var(--dashboard-black);
            color: var(--dashboard-white);
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.75rem;
            text-transform: uppercase;
            font-weight: 500;
        }
        
        .image-actions, .file-actions {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            margin-top: 0.5rem;
        }
        
        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.85rem;
            border-radius: 6px;
            text-decoration: none;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 500;
        }
        
        .btn-sm.btn-primary {
            background: var(--dashboard-white);
            color: var(--dashboard-black);
        }
        
        .btn-sm.btn-primary:hover {
            background: var(--dashboard-light-gray);
        }
        
        .btn-sm.btn-secondary {
            background: transparent;
            color: var(--dashboard-white);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .btn-sm.btn-secondary:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .remove-image {
            position: absolute;
            top: 5px;
            right: 5px;
            background: var(--dashboard-danger);
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }
        
        .remove-image:hover {
            background: #B91C1C;
        }
        
        .image-preview.has-image {
            position: relative;
            padding: 0;
        }
        
        .image-preview.has-image img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 8px;
        }
        
        .muted {
            color: var(--dashboard-gray);
            font-size: 0.85rem;
            margin-top: 0.5rem;
            display: block;
        }
    </style>

    <script>
        function previewImage(input, previewId) {
            const preview = document.getElementById(previewId);
            const file = input.files[0];
            
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    preview.innerHTML = `
                        <img src="${e.target.result}" alt="Preview">
                        <button type="button" class="remove-image" onclick="removeImage('${input.id}', '${previewId}')">√ó</button>
                    `;
                    preview.classList.add('has-image');
                };
                reader.readAsDataURL(file);
            }
        }
        
        function removeImage(inputId, previewId) {
            const input = document.getElementById(inputId);
            const preview = document.getElementById(previewId);
            
            input.value = '';
            preview.innerHTML = `
                <div class="preview-placeholder">
                    <i class="icon">üì∑</i>
                    <span>Ch·ªçn ·∫£nh</span>
                </div>
            `;
            preview.classList.remove('has-image');
        }
        
        function previewMultipleImages(input, containerId) {
            const container = document.getElementById(containerId);
            const files = input.files;
            
            // Clear existing previews
            container.innerHTML = '';
            
            if (files.length > 0) {
                // Hide placeholder
                const uploadArea = input.parentElement.querySelector('.image-preview-container');
                uploadArea.style.display = 'none';
                
                // Show previews
                Array.from(files).forEach((file, index) => {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const previewItem = document.createElement('div');
                        previewItem.className = 'preview-item';
                        previewItem.innerHTML = `
                            <img src="${e.target.result}" alt="Preview ${index + 1}">
                            <button type="button" class="remove-btn" onclick="removeMultipleImage(${index}, '${input.id}', '${containerId}')">√ó</button>
                        `;
                        container.appendChild(previewItem);
                    };
                    reader.readAsDataURL(file);
                });
            } else {
                // Show placeholder if no files
                const uploadArea = input.parentElement.querySelector('.image-preview-container');
                uploadArea.style.display = 'flex';
            }
        }
        
        function removeMultipleImage(index, inputId, containerId) {
            const input = document.getElementById(inputId);
            const container = document.getElementById(containerId);
            
            // Create new FileList without the removed file
            const dt = new DataTransfer();
            Array.from(input.files).forEach((file, i) => {
                if (i !== index) {
                    dt.items.add(file);
                }
            });
            input.files = dt.files;
            
            // Re-render previews
            previewMultipleImages(input, containerId);
        }
        
        // Extract filename from URL
        function extractFileName(url) {
            if (!url) return 'unknown';
            const parts = url.split('/');
            return parts[parts.length - 1];
        }
        
        // Extract file extension from URL
        function extractFileExtension(url) {
            if (!url) return 'unknown';
            const fileName = extractFileName(url);
            const lastDot = fileName.lastIndexOf('.');
            return lastDot > 0 ? fileName.substring(lastDot + 1).toLowerCase() : 'unknown';
        }
        
        // Update file names on page load
        function updateFileNames() {
            // Update logo file names
            const logoNameElements = document.querySelectorAll('.image-name[data-url]');
            logoNameElements.forEach(element => {
                const url = element.getAttribute('data-url');
                element.textContent = extractFileName(url);
            });
            
            const logoTypeElements = document.querySelectorAll('.image-type[data-url]');
            logoTypeElements.forEach(element => {
                const url = element.getAttribute('data-url');
                element.textContent = extractFileExtension(url);
            });
            
            // Update cover file names
            const coverNameElements = document.querySelectorAll('.image-name[data-url]');
            coverNameElements.forEach(element => {
                const url = element.getAttribute('data-url');
                element.textContent = extractFileName(url);
            });
            
            const coverTypeElements = document.querySelectorAll('.image-type[data-url]');
            coverTypeElements.forEach(element => {
                const url = element.getAttribute('data-url');
                element.textContent = extractFileExtension(url);
            });
            
            // Update business license file names
            const licenseNameElements = document.querySelectorAll('.file-name[data-url]');
            licenseNameElements.forEach(element => {
                const url = element.getAttribute('data-url');
                element.textContent = extractFileName(url);
            });
            
            const licenseTypeElements = document.querySelectorAll('.file-type[data-url]');
            licenseTypeElements.forEach(element => {
                const url = element.getAttribute('data-url');
                element.textContent = extractFileExtension(url);
            });
        }
        
        function removeCurrentImage(inputId, previewId) {
            const input = document.getElementById(inputId);
            const preview = document.getElementById(previewId);
            
            // Clear input
            input.value = '';
            
            // Reset preview to placeholder
            preview.innerHTML = `
                <div class="preview-placeholder">
                    <i class="icon">üì∑</i>
                    <span>Ch·ªçn ·∫£nh</span>
                </div>
            `;
            preview.classList.remove('has-image');
        }
        
        function removeCurrentFile(inputId, previewId) {
            const input = document.getElementById(inputId);
            const preview = document.getElementById(previewId);
            
            // Clear input
            input.value = '';
            
            // Reset preview to placeholder
            preview.innerHTML = `
                <div class="preview-placeholder">
                    <i class="icon">üìÑ</i>
                    <span>Ch·ªçn file</span>
                </div>
            `;
        }
        
        // Drag and drop functionality
        function setupDragAndDrop(inputId, containerId) {
            const container = document.getElementById(containerId);
            const input = document.getElementById(inputId);
            
            container.addEventListener('dragover', function(e) {
                e.preventDefault();
                container.classList.add('drag-over');
            });
            
            container.addEventListener('dragleave', function(e) {
                e.preventDefault();
                container.classList.remove('drag-over');
            });
            
            container.addEventListener('drop', function(e) {
                e.preventDefault();
                container.classList.remove('drag-over');
                
                const files = e.dataTransfer.files;
                input.files = files;
                previewMultipleImages(input, containerId);
            });
            
            container.addEventListener('click', function() {
                input.click();
            });
        }
        
        function previewFile(input, previewId) {
            const preview = document.getElementById(previewId);
            const file = input.files[0];
            
            if (file) {
                const fileSize = (file.size / 1024 / 1024).toFixed(2);
                preview.innerHTML = `
                    <div class="file-info">
                        <i class="icon">üìÑ</i>
                        <span><strong>${file.name}</strong></span>
                        <span>${fileSize} MB</span>
                        <button type="button" class="remove-image" onclick="removeFile('${input.id}', '${previewId}')">√ó</button>
                    </div>
                `;
            }
        }
        
        function removeImage(inputId, previewId) {
            const input = document.getElementById(inputId);
            const preview = document.getElementById(previewId);
            
            input.value = '';
            preview.innerHTML = `
                <div class="preview-placeholder">
                    <i class="icon">üì∑</i>
                    <span>Ch·ªçn ·∫£nh</span>
                </div>
            `;
            preview.classList.remove('has-image');
        }
        
        function previewFile(input, previewId) {
            const preview = document.getElementById(previewId);
            const file = input.files[0];
            
            if (file) {
                const fileSize = (file.size / 1024 / 1024).toFixed(2);
                preview.innerHTML = `
                    <div class="file-info">
                        <i class="icon">üìÑ</i>
                        <span><strong>${file.name}</strong></span>
                        <span>${fileSize} MB</span>
                        <button type="button" class="remove-image" onclick="removeFile('${input.id}', '${previewId}')">√ó</button>
                    </div>
                `;
            }
        }
        
        function removeFile(inputId, previewId) {
            const input = document.getElementById(inputId);
            const preview = document.getElementById(previewId);
            
            input.value = '';
            preview.innerHTML = `
                <div class="preview-placeholder">
                    <i class="icon">üìÑ</i>
                    <span>Ch·ªçn file</span>
                </div>
            `;
        }
        
        // Click to upload
        document.addEventListener('DOMContentLoaded', function() {
            // Update file names from URLs
            updateFileNames();
            
            // Setup single image uploads
            const singlePreviews = document.querySelectorAll('.image-preview:not(.image-preview-container)');
            singlePreviews.forEach(preview => {
                preview.addEventListener('click', function() {
                    const input = this.parentElement.querySelector('input[type="file"]');
                    if (input) {
                        input.click();
                    }
                });
            });
            
            // Setup file uploads
            const filePreviews = document.querySelectorAll('.file-preview');
            filePreviews.forEach(preview => {
                preview.addEventListener('click', function() {
                    const input = this.parentElement.querySelector('input[type="file"]');
                    if (input) {
                        input.click();
                    }
                });
            });
        });
    </script>
</body>
</html>
