<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${pageTitle}">Chi tiết Nhà hàng</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Design System CSS -->
    <link th:href="@{/css/design-system.css}" rel="stylesheet">
    
    <style>
        /* Override all conflicts with !important */
        .restaurant-detail-page__reservation-widget {
            background: white !important;
            border: 1px solid #e5e7eb !important;
            border-radius: 12px !important;
            padding: 1.5rem !important;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1) !important;
            position: sticky !important;
            top: 2rem !important;
            display: block !important;
            width: 100% !important;
            margin: 0 !important;
        }
        
        .restaurant-detail-page__reservation-title {
            font-size: 1.25rem !important;
            font-weight: 600 !important;
            color: #1f2937 !important;
            margin-bottom: 1rem !important;
        }
        
        .restaurant-detail-page__form-group {
            margin-bottom: 1rem !important;
        }
        
        .restaurant-detail-page__form-label {
            display: block !important;
            font-weight: 500 !important;
            color: #374151 !important;
            margin-bottom: 0.5rem !important;
        }
        
        .restaurant-detail-page__input-group {
            position: relative !important;
            display: flex !important;
            align-items: center !important;
        }
        
        .restaurant-detail-page__input-icon {
            position: absolute !important;
            left: 12px !important;
            color: #6b7280 !important;
            z-index: 10 !important;
        }
        
        .restaurant-detail-page__form-control {
            width: 100% !important;
            padding: 12px 12px 12px 40px !important;
            border: 1px solid #d1d5db !important;
            border-radius: 8px !important;
            font-size: 14px !important;
            background: white !important;
            color: #1f2937 !important;
        }
        
        .restaurant-detail-page__form-control:focus {
            outline: none !important;
            border-color: #3b82f6 !important;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1) !important;
        }
        
        .restaurant-detail-page__btn-book {
            width: 100% !important;
            background: #1f2937 !important;
            color: white !important;
            border: none !important;
            padding: 12px !important;
            border-radius: 8px !important;
            font-weight: 600 !important;
            cursor: pointer !important;
            transition: background-color 0.2s !important;
        }
        
        .restaurant-detail-page__btn-book:hover {
            background: #374151 !important;
        }
        
        .restaurant-detail-page__cancellation-policy {
            margin-top: 0.75rem !important;
            font-size: 12px !important;
            color: #6b7280 !important;
            text-align: center !important;
        }
        
        /* Debug styles - remove these later */
        .debug-red {
            background: red !important;
            color: white !important;
            padding: 10px !important;
            margin-bottom: 10px !important;
            font-size: 16px !important;
            font-weight: bold !important;
        }

        .reservation-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 1.5rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            font-weight: 500;
            color: #374151;
            margin-bottom: 0.5rem;
        }
        
        .form-control {
            border: 1px solid #d1d5db;
            border-radius: 8px;
            padding: 0.75rem;
            font-size: 0.9rem;
            width: 100%;
        }

        .form-control:focus {
            border-color: #4a90e2;
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
            outline: none;
        }

        .input-group {
            position: relative;
        }

        .input-group .form-control {
            padding-left: 2.5rem;
        }

        .input-icon {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: #9ca3af;
            z-index: 3;
        }

        .btn-book {
            background: #1f2937;
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 8px;
            font-weight: 600;
            width: 100%;
            transition: all 0.3s ease;
        }
        
        .btn-book:hover {
            background: #111827;
            transform: translateY(-1px);
        }

        .cancellation-policy {
            font-size: 0.8rem;
            color: #6b7280;
            text-align: center;
            margin-top: 1rem;
        }
    </style>
</head>

<body>
    <!-- Header -->
    <div th:replace="~{fragments/design-system-components :: unified-header}"></div>

    <!-- Restaurant Header -->
    <header class="restaurant-detail-page__header" role="banner">
            <div class="container">
            <div class="restaurant-detail-page__info">
                <img th:if="${logo != null}" th:src="${logo.url}" class="restaurant-detail-page__logo"
                    alt="Logo nhà hàng" loading="lazy">
                <img th:unless="${logo != null}" src="https://via.placeholder.com/120"
                    class="restaurant-detail-page__logo" alt="Logo nhà hàng" loading="lazy">
                <div class="restaurant-detail-page__details">
                    <h1 th:text="${restaurant.restaurantName}">Tên Nhà hàng</h1>
                    <div class="restaurant-detail-page__meta" role="list">
                        <span class="restaurant-detail-page__cuisine-tag" th:text="${restaurant.cuisineType}"
                            role="listitem">Contemporary Italian</span>
                        <div class="restaurant-detail-page__meta-item" role="listitem">
                            <i class="fas fa-star text-warning" aria-hidden="true"></i>
                            <span
                                th:text="${restaurant.formattedAverageRating} + ' (' + ${restaurant.reviewCount} + ' reviews)'">4.7
                                (207 reviews)</span>
                    </div>
                        <div class="restaurant-detail-page__meta-item" role="listitem">
                            <i class="fas fa-dollar-sign" aria-hidden="true"></i>
                            <span>$$$ - Upscale Dining</span>
                </div>
                        <div class="restaurant-detail-page__meta-item" role="listitem">
                            <i class="fas fa-map-marker-alt" aria-hidden="true"></i>
                            <span th:text="${restaurant.address}">123 Gourmet Street, Downtown District</span>
            </div>
                        <div class="restaurant-detail-page__meta-item" role="listitem">
                            <i class="fas fa-phone" aria-hidden="true"></i>
                            <span th:text="${restaurant.phone}">+1 (555) 123-4567</span>
        </div>
                        <div class="restaurant-detail-page__meta-item" role="listitem">
                            <i class="fas fa-clock" aria-hidden="true"></i>
                            <span>Mon-Thu: 11AM-10PM, Fri-Sat: 11AM-11PM, Sun: 12PM-9PM</span>
    </div>
                </div>
                        </div>
                                </div>
                            </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <div class="row">
            <!-- Left Column - Main Content -->
            <div class="col-lg-8">
                <!-- Navigation Tabs -->
                <nav class="restaurant-detail-page__nav-tabs" role="tablist" aria-label="Restaurant information tabs">
                    <ul class="nav nav-tabs" id="restaurantTabs">
                        <li class="nav-item" role="presentation">
                            <button
                                class="nav-link restaurant-detail-page__nav-link restaurant-detail-page__nav-link--active"
                                id="about-tab" data-bs-toggle="tab" data-bs-target="#about" type="button" role="tab"
                                aria-controls="about" aria-selected="true" aria-label="About restaurant information">
                                About
                        </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link restaurant-detail-page__nav-link" id="menu-tab" data-bs-toggle="tab"
                                data-bs-target="#menu" type="button" role="tab" aria-controls="menu"
                                aria-selected="false" aria-label="Restaurant menu">
                                Menu
                        </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link restaurant-detail-page__nav-link" id="tables-tab"
                                data-bs-toggle="tab" data-bs-target="#tables" type="button" role="tab"
                                aria-controls="tables" aria-selected="false" aria-label="Table layout and availability">
                                Tables
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link restaurant-detail-page__nav-link" id="reviews-tab"
                                data-bs-toggle="tab" data-bs-target="#reviews" type="button" role="tab"
                                aria-controls="reviews" aria-selected="false" aria-label="Customer reviews and ratings">
                                Reviews
                            </button>
                        </li>
                    </ul>
                </nav>

                <!-- Tab Content -->
                <div class="tab-content restaurant-detail-page__tab-content" id="restaurantTabContent">
                    <!-- About Tab -->
                    <section class="tab-pane fade show active restaurant-detail-page__tab-pane" id="about"
                        role="tabpanel" aria-labelledby="about-tab">
                        <div class="restaurant-detail-page__about-section">
                            <h2 class="restaurant-detail-page__section-title">About Our Restaurant</h2>
                            <p class="restaurant-detail-page__section-subtitle">Discover our story and what makes us
                                special</p>

                            <article class="restaurant-detail-page__story-card">
                                <h3>Our Story</h3>
                                <p th:text="${restaurant.description}">Founded in 2014, our restaurant has been a
                                    cornerstone of fine dining in the heart of the city. We believe that great food
                                    brings people together and creates unforgettable memories.</p>
                                <p>Our passionate team of chefs combines traditional cooking techniques with innovative
                                    culinary concepts to deliver a unique dining experience. Every dish is crafted with
                                    attention to detail and a deep respect for quality ingredients.</p>
                                <p>Whether you're celebrating a special occasion or enjoying a casual evening out, we
                                    strive to make every visit memorable with exceptional food, warm hospitality, and an
                                    inviting atmosphere.</p>
                            </article>

                            <section class="restaurant-detail-page__cuisine-types" aria-labelledby="cuisine-heading">
                                <h3 id="cuisine-heading">Cuisine Types</h3>
                                <ul class="restaurant-detail-page__cuisine-tags" role="list">
                                    <li role="listitem">
                                        <span class="restaurant-detail-page__cuisine-tag-item"
                                            th:text="${restaurant.cuisineType}" tabindex="0" role="button"
                                            aria-label="Primary cuisine type">Italian</span>
                                    </li>
                                    <li role="listitem" th:if="${restaurant.cuisineType != 'Mediterranean'}">
                                        <span class="restaurant-detail-page__cuisine-tag-item" tabindex="0"
                                            role="button" aria-label="Mediterranean cuisine">Mediterranean</span>
                                    </li>
                                    <li role="listitem" th:if="${restaurant.cuisineType != 'Contemporary'}">
                                        <span class="restaurant-detail-page__cuisine-tag-item" tabindex="0"
                                            role="button" aria-label="Contemporary cuisine">Contemporary</span>
                                    </li>
                                    <li role="listitem" th:if="${restaurant.cuisineType != 'Seafood'}">
                                        <span class="restaurant-detail-page__cuisine-tag-item" tabindex="0"
                                            role="button" aria-label="Seafood cuisine">Seafood</span>
                                    </li>
                                    <li role="listitem" th:if="${restaurant.cuisineType != 'Steakhouse'}">
                                        <span class="restaurant-detail-page__cuisine-tag-item" tabindex="0"
                                            role="button" aria-label="Steakhouse cuisine">Steakhouse</span>
                                    </li>
                                </ul>
                            </section>

                            <section class="restaurant-detail-page__highlights" aria-labelledby="highlights-heading">
                                <h3 id="highlights-heading">What Sets Us Apart</h3>
                                <div class="restaurant-detail-page__highlights-grid" role="list">
                                    <article class="restaurant-detail-page__highlight-card" role="listitem">
                                        <div class="restaurant-detail-page__highlight-icon restaurant-detail-page__highlight-icon--ingredients"
                                            aria-hidden="true">
                                            <i class="fas fa-leaf"></i>
                                    </div>
                                        <h4>Fresh Ingredients</h4>
                                        <p>We source locally and use only the freshest seasonal ingredients</p>
                                    </article>
                                    <article class="restaurant-detail-page__highlight-card" role="listitem">
                                        <div class="restaurant-detail-page__highlight-icon restaurant-detail-page__highlight-icon--award"
                                            aria-hidden="true">
                                            <i class="fas fa-award"></i>
                                </div>
                                        <h4>Award Winning</h4>
                                        <p>Recognized by Michelin Guide and Top Restaurant Awards</p>
                                    </article>
                                    <article class="restaurant-detail-page__highlight-card" role="listitem">
                                        <div class="restaurant-detail-page__highlight-icon restaurant-detail-page__highlight-icon--sustainable"
                                            aria-hidden="true">
                                            <i class="fas fa-leaf"></i>
                                </div>
                                        <h4>Sustainable</h4>
                                        <p>Committed to eco-friendly practices and sustainable sourcing</p>
                                    </article>
                                    <article class="restaurant-detail-page__highlight-card" role="listitem">
                                        <div class="restaurant-detail-page__highlight-icon restaurant-detail-page__highlight-icon--experience"
                                            aria-hidden="true">
                                            <i class="fas fa-clock"></i>
                                </div>
                                        <h4>10+ Years</h4>
                                        <p>Over a decade of culinary excellence and service</p>
                                    </article>
                            </div>
                            </section>
                        </div>
                    </section>

                    <!-- Menu Tab -->
                    <section class="tab-pane fade restaurant-detail-page__tab-pane" id="menu" role="tabpanel"
                        aria-labelledby="menu-tab">
                        <div class="restaurant-detail-page__menu-section">
                            <h2 class="restaurant-detail-page__section-title">Our Menu</h2>
                            <p class="restaurant-detail-page__section-subtitle">Explore our selection of carefully
                                crafted dishes</p>

                            <nav class="restaurant-detail-page__menu-filters" role="tablist" aria-label="Menu filters">
                                <button
                                    class="restaurant-detail-page__filter-btn restaurant-detail-page__filter-btn--active"
                                    data-filter="all" role="tab" aria-selected="true"
                                    aria-controls="menu-items">All</button>
                                <button class="restaurant-detail-page__filter-btn" data-filter="appetizers" role="tab"
                                    aria-selected="false" aria-controls="menu-items">Appetizers</button>
                                <button class="restaurant-detail-page__filter-btn" data-filter="main" role="tab"
                                    aria-selected="false" aria-controls="menu-items">Main Courses</button>
                                <button class="restaurant-detail-page__filter-btn" data-filter="desserts" role="tab"
                                    aria-selected="false" aria-controls="menu-items">Desserts</button>
                            </nav>

                            <div class="restaurant-detail-page__menu-items" id="menu-items" role="tabpanel">
                                <article class="restaurant-detail-page__menu-item" th:each="dish : ${dishes}"
                                    role="listitem">
                                    <div class="restaurant-detail-page__menu-item-info">
                                        <h3 class="restaurant-detail-page__menu-item-name" th:text="${dish.name}">
                                            Grilled Salmon</h3>
                                        <p class="restaurant-detail-page__menu-item-description"
                                            th:text="${dish.description}">Fresh Atlantic salmon with herbs, served with
                                            seasonal vegetables and lemon butter sauce</p>
                                        <div class="restaurant-detail-page__menu-item-tags">
                                            <span
                                                class="restaurant-detail-page__menu-tag restaurant-detail-page__menu-tag--popular"
                                                th:if="${#strings.containsIgnoreCase(dish.name, 'popular') or #strings.containsIgnoreCase(dish.description, 'popular')}"
                                                aria-label="Popular dish">Popular</span>
                                            <span
                                                class="restaurant-detail-page__menu-tag restaurant-detail-page__menu-tag--vegetarian"
                                                th:if="${#strings.containsIgnoreCase(dish.name, 'vegetarian') or #strings.containsIgnoreCase(dish.description, 'vegetarian') or #strings.containsIgnoreCase(dish.category, 'vegetarian')}"
                                                aria-label="Vegetarian dish">Vegetarian</span>
                                            <span
                                                class="restaurant-detail-page__menu-tag restaurant-detail-page__menu-tag--spicy"
                                                th:if="${#strings.containsIgnoreCase(dish.name, 'spicy') or #strings.containsIgnoreCase(dish.description, 'spicy') or #strings.containsIgnoreCase(dish.name, 'hot') or #strings.containsIgnoreCase(dish.description, 'hot')}"
                                                aria-label="Spicy dish">Spicy</span>
                                    </div>
                                </div>
                                    <div class="restaurant-detail-page__menu-item-price" th:text="'$' + ${dish.price}">
                                        $28.99</div>
                                </article>
                                </div>
                        </div>
                    </section>

                    <!-- Tables Tab -->
                    <div class="tab-pane fade" id="tables" role="tabpanel">
                        <div class="tables-section">
                            <h2 class="section-title">Restaurant Layout</h2>
                            <p class="section-subtitle">View our table arrangement and choose your preferred seating
                                location</p>

                            <div class="table-legend">
                                <div class="legend-item">
                                    <div class="legend-dot available"></div>
                                    <span>Available</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-dot reserved"></div>
                                    <span>Reserved</span>
                        </div>
                    </div>
                    
                            <div class="restaurant-layout" id="restaurantLayout">
                                <div class="layout-area windows">Windows</div>
                                <div class="layout-area kitchen">Kitchen</div>
                                <div class="layout-area entrance">Entrance</div>

                                <!-- Tables will be positioned here -->
                                <div class="table-item available" style="top: 100px; left: 50px;" data-table="T1">
                                    T1<br>2p</div>
                                <div class="table-item reserved" style="top: 100px; left: 120px;" data-table="T6">
                                    T6<br>2p</div>
                                <div class="table-item available" style="top: 100px; left: 190px;" data-table="T2">
                                    T2<br>2p</div>
                                <div class="table-item reserved" style="top: 200px; left: 100px;" data-table="T3">
                                    T3<br>4p</div>
                                <div class="table-item available" style="top: 200px; left: 170px;" data-table="T4">
                                    T4<br>4p</div>
                                <div class="table-item available" style="top: 300px; left: 50px;" data-table="T5">
                                    T5<br>6p</div>
                                <div class="table-item available" style="top: 300px; left: 120px;" data-table="T7">
                                    T7<br>4p</div>
                                <div class="table-item available" style="top: 300px; left: 190px;" data-table="T8">
                                    T8<br>8p</div>
                        </div>

                        <div>
                                <h3>Table Views</h3>
                                <div class="table-views">
                                    <div class="table-view-card">
                                        <img src="https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80"
                                            class="table-view-image" alt="Window Tables">
                                        <div class="table-view-info">
                                            <div class="table-view-title">Window Tables</div>
                                            <div class="table-view-description">2-4 seats, great views</div>
                        </div>
                    </div>
                                    <div class="table-view-card">
                                        <img src="https://images.unsplash.com/photo-1555396273-367ea4eb4db5?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80"
                                            class="table-view-image" alt="Center Tables">
                                        <div class="table-view-info">
                                            <div class="table-view-title">Center Tables</div>
                                            <div class="table-view-description">4-6 seats, lively atmosphere</div>
                        </div>
                        </div>
                                    <div class="table-view-card">
                                        <img src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80"
                                            class="table-view-image" alt="Private Room">
                                        <div class="table-view-info">
                                            <div class="table-view-title">Private Room</div>
                                            <div class="table-view-description">6-8 seats, intimate setting</div>
                    </div>
                        </div>
                        </div>
                    </div>
                        </div>
                    </div>
                    
                    <!-- Reviews Tab -->
                    <div class="tab-pane fade" id="reviews" role="tabpanel">
                        <div class="reviews-section">
                            <h2 class="section-title">Customer Reviews</h2>
                            <p class="section-subtitle">See what our guests are saying about their experience</p>

                            <div class="rating-summary">
                                <div class="rating-number" th:text="${restaurant.formattedAverageRating}">4.7</div>
                        <div>
                                    <div class="rating-stars">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                        </div>
                                    <div class="rating-text"
                                        th:text="'Based on ' + ${restaurant.reviewCount} + ' reviews'">Based on 207
                                        reviews</div>
                    </div>
                                <div class="rating-breakdown" th:if="${statistics != null}">
                                    <div class="rating-bar" th:each="i : ${#numbers.sequence(5, 1)}">
                                        <span class="rating-label" th:text="${i} + '★'">5★</span>
                                        <div class="rating-progress">
                                            <div class="rating-fill"
                                                th:style="'width: ' + ${statistics.getPercentageForRating(i)} + '%'">
                        </div>
                            </div>
                                        <span class="rating-count"
                                            th:text="${statistics.getCountForRating(i)}">156</span>
                        </div>
                    </div>
                    
                                <div class="rating-breakdown" th:if="${statistics == null}">
                                    <div class="text-center text-muted">
                                        <p>Chưa có dữ liệu đánh giá</p>
                    </div>
                    </div>
                </div>

                            <div class="reviews-list" th:if="${recentReviews != null and !recentReviews.isEmpty()}">
                                <div class="review-item" th:each="review : ${recentReviews}">
                                    <div class="review-header">
                                        <div class="review-avatar"
                                            th:text="${#strings.substring(review.customerName, 0, 2)}">SJ</div>
                                        <div class="review-info">
                                            <div class="review-name" th:text="${review.customerName}">Sarah Johnson
            </div>
                                            <div class="review-meta">
                                                <div class="rating-stars">
                                                    <i class="fas fa-star" th:each="i : ${#numbers.sequence(1, 5)}"
                                                        th:classappend="${i <= review.rating} ? ' text-warning' : ' text-muted'"></i>
        </div>
                                                <span th:text="${#temporals.format(review.createdAt, 'dd/MM/yyyy')}">2
                                                    days ago</span>
    </div>
        </div>
    </div>
                                    <div class="review-content" th:text="${review.comment}">
                                        The food was absolutely incredible. We had the grilled salmon and beef
                                        tenderloin - both cooked to perfection. The service was attentive without being
                                        intrusive. The ambiance is perfect for a romantic dinner.
                            </div>
                        </div>
                    </div>
                    
                            <div class="reviews-list" th:if="${recentReviews == null or recentReviews.isEmpty()}">
                                <div class="review-item">
                                    <div class="review-content text-center text-muted">
                                        <i class="fas fa-comment-slash fa-2x mb-3"></i>
                                        <p>Chưa có đánh giá nào cho nhà hàng này.</p>
                    </div>
                    </div>
                </div>
                </div>
            </div>
        </div>
    </div>
    
            <!-- Right Column - Reservation Widget -->
            <aside class="col-lg-4" role="complementary" aria-label="Reservation widget">
                <!-- Debug: This should be visible -->
                <div class="restaurant-detail-page__reservation-widget">
                    <h3 class="restaurant-detail-page__reservation-title">Make a Reservation</h3>

                    <form th:action="@{/booking/new}" method="get" role="form" aria-label="Reservation form">
                        <input type="hidden" name="restaurantId" th:value="${restaurant.restaurantId}">
                        <input type="hidden" name="prefill" value="true">

                        <div class="restaurant-detail-page__form-group">
                            <label class="restaurant-detail-page__form-label" for="reservation-date">Select Date</label>
                            <div class="restaurant-detail-page__input-group">
                                <i class="fas fa-calendar restaurant-detail-page__input-icon" aria-hidden="true"></i>
                                <input type="date" class="restaurant-detail-page__form-control" name="prefillDate"
                                    id="reservation-date" required aria-describedby="date-help">
                        </div>
                    </div>
                    
                        <div class="restaurant-detail-page__form-group">
                            <label class="restaurant-detail-page__form-label" for="reservation-time">Select Time</label>
                            <div class="restaurant-detail-page__input-group">
                                <i class="fas fa-clock restaurant-detail-page__input-icon" aria-hidden="true"></i>
                                <select class="restaurant-detail-page__form-control" name="prefillTime" id="reservation-time"
                                    required aria-describedby="time-help">
                                    <option value="">Choose time</option>
                                    <option value="17:00">5:00 PM</option>
                                    <option value="17:30">5:30 PM</option>
                                    <option value="18:00">6:00 PM</option>
                                    <option value="18:30">6:30 PM</option>
                                    <option value="19:00">7:00 PM</option>
                                    <option value="19:30">7:30 PM</option>
                                    <option value="20:00">8:00 PM</option>
                                    <option value="20:30">8:30 PM</option>
                                    <option value="21:00">9:00 PM</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="restaurant-detail-page__form-group">
                            <label class="restaurant-detail-page__form-label" for="reservation-guests">Number of
                                Guests</label>
                            <div class="restaurant-detail-page__input-group">
                                <i class="fas fa-user restaurant-detail-page__input-icon" aria-hidden="true"></i>
                                <select class="restaurant-detail-page__form-control" name="prefillGuests"
                                    id="reservation-guests" required aria-describedby="guests-help">
                                    <option value="">Select guests</option>
                                    <option value="1">1 Guest</option>
                                    <option value="2">2 Guests</option>
                                    <option value="3">3 Guests</option>
                                    <option value="4">4 Guests</option>
                                    <option value="5">5 Guests</option>
                                    <option value="6">6 Guests</option>
                                    <option value="7">7 Guests</option>
                                    <option value="8">8 Guests</option>
                                </select>
        </div>
    </div>
    
                        <button type="submit" class="restaurant-detail-page__btn-book" aria-describedby="booking-help"
                            onclick="return validateReservationForm()">
                            <i class="fas fa-calendar-check me-2"></i>
                            Book Now
                        </button>

                        <div class="restaurant-detail-page__cancellation-policy" id="booking-help">
                            <i class="fas fa-info-circle me-1"></i>
                            You can cancel or modify your booking up to 24 hours before your reservation
                        </div>
                    </form>
                    </div>
            </aside>
        </div>
    </div>
    
    <!-- Footer -->
    <div th:replace="~{fragments/design-system-components :: unified-footer}"></div>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Restaurant Detail JS -->
    <script th:src="@{/js/restaurant-detail.js}" defer></script>

    <!-- Additional validation for reservation form -->
    <script>
        function validateReservationForm() {
            const dateInput = document.querySelector('input[name="prefillDate"]');
            const timeSelect = document.querySelector('select[name="prefillTime"]');
            const guestsSelect = document.querySelector('select[name="prefillGuests"]');

            // Check if all fields are filled
            if (!dateInput.value || !timeSelect.value || !guestsSelect.value) {
                alert('Vui lòng điền đầy đủ thông tin đặt bàn.');
                return false;
            }

            // Check if date is not in the past
            const selectedDate = new Date(dateInput.value);
            const today = new Date();
            today.setHours(0, 0, 0, 0);

            if (selectedDate < today) {
                alert('Không thể đặt bàn trong quá khứ. Vui lòng chọn ngày khác.');
                return false;
            }

            // Check if time is valid for today
            if (selectedDate.toDateString() === today.toDateString()) {
                const [hours, minutes] = timeSelect.value.split(':').map(Number);
                const selectedTime = hours * 60 + minutes;
                const currentTime = today.getHours() * 60 + today.getMinutes();

                if (selectedTime <= currentTime + 30) { // 30 minutes buffer
                    alert('Giờ đặt bàn không hợp lệ. Vui lòng chọn giờ trong tương lai.');
                    return false;
                }
            }

            return true;
        }

        // Set default date to tomorrow
        document.addEventListener('DOMContentLoaded', function() {
            const dateInput = document.getElementById('reservation-date');
            if (dateInput) {
                const tomorrow = new Date();
                tomorrow.setDate(tomorrow.getDate() + 1);
                dateInput.value = tomorrow.toISOString().split('T')[0];
            }
        });
    </script>
</body>

</html>