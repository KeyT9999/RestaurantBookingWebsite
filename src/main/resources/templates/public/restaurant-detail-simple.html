<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${pageTitle}">Chi tiết Nhà hàng</title>
    
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Design System CSS -->
    <link th:href="@{/css/design-system.css}" rel="stylesheet">
    
    <style>
        /* Simple reservation widget styles */
        .reservation-widget {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            position: sticky;
            top: 2rem;
        }
        
        .reservation-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 1.5rem;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-label {
            font-weight: 500;
            color: #374151;
            margin-bottom: 0.5rem;
        }
        
        .form-control {
            border: 1px solid #d1d5db;
            border-radius: 8px;
            padding: 0.75rem;
            font-size: 0.9rem;
            width: 100%;
        }
        
        .form-control:focus {
            border-color: #4a90e2;
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
            outline: none;
        }
        
        .input-group {
            position: relative;
        }
        
        .input-group .form-control {
            padding-left: 2.5rem;
        }
        
        .input-icon {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: #9ca3af;
            z-index: 3;
        }
        
        .btn-book {
            background: #1f2937;
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 8px;
            font-weight: 600;
            width: 100%;
            transition: all 0.3s ease;
        }
        
        .btn-book:hover {
            background: #111827;
            transform: translateY(-1px);
        }
        
        .cancellation-policy {
            font-size: 0.8rem;
            color: #6b7280;
            text-align: center;
            margin-top: 1rem;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div th:replace="~{fragments/design-system-components :: unified-header}"></div>

    <!-- Restaurant Header -->
    <div class="bg-primary text-white py-4 mb-4">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-auto">
                    <img th:if="${logo != null}" th:src="${logo.url}" class="rounded-circle" width="120" height="120" alt="Logo">
                    <img th:unless="${logo != null}" src="https://via.placeholder.com/120" class="rounded-circle" width="120" height="120" alt="Logo">
                </div>
                <div class="col">
                    <h1 class="h2 mb-2" th:text="${restaurant.restaurantName}">Tên Nhà hàng</h1>
                    <div class="d-flex flex-wrap gap-3">
                        <span class="badge bg-light text-dark" th:text="${restaurant.cuisineType}">Contemporary Italian</span>
                        <span class="text-white-50">
                            <i class="fas fa-star text-warning"></i>
                            <span th:text="${restaurant.formattedAverageRating} + ' (' + ${restaurant.reviewCount} + ' reviews)'">4.7 (207 reviews)</span>
                        </span>
                        <span class="text-white-50">$$$ - Upscale Dining</span>
                        <span class="text-white-50">
                            <i class="fas fa-map-marker-alt"></i>
                            <span th:text="${restaurant.address}">123 Gourmet Street, Downtown District</span>
                        </span>
                        <span class="text-white-50">
                            <i class="fas fa-phone"></i>
                            <span th:text="${restaurant.phone}">+1 (555) 123-4567</span>
                        </span>
                        <span class="text-white-50">
                            <i class="fas fa-clock"></i>
                            <span>Mon-Thu: 11AM-10PM, Fri-Sat: 11AM-11PM, Sun: 12PM-9PM</span>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="container">
        <div class="row">
            <!-- Left Column - Main Content -->
            <div class="col-lg-8">
                <!-- Navigation Tabs -->
                <ul class="nav nav-tabs mb-4" id="restaurantTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="about-tab" data-bs-toggle="tab" data-bs-target="#about" type="button" role="tab">
                            About
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="menu-tab" data-bs-toggle="tab" data-bs-target="#menu" type="button" role="tab">
                            Menu
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="tables-tab" data-bs-toggle="tab" data-bs-target="#tables" type="button" role="tab">
                            Tables
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="reviews-tab" data-bs-toggle="tab" data-bs-target="#reviews" type="button" role="tab">
                            Reviews
                        </button>
                    </li>
                </ul>

                <!-- Tab Content -->
                <div class="tab-content" id="restaurantTabContent">
                    <!-- About Tab -->
                    <div class="tab-pane fade show active" id="about" role="tabpanel">
                        <div class="card">
                            <div class="card-body">
                                <h2 class="h4 mb-3">About Our Restaurant</h2>
                                <p class="text-muted mb-4">Discover our story and what makes us special</p>
                                
                                <div class="mb-4">
                                    <h3 class="h5">Our Story</h3>
                                    <p th:text="${restaurant.description}">Founded in 2014, our restaurant has been a cornerstone of fine dining in the heart of the city. We believe that great food brings people together and creates unforgettable memories.</p>
                                    <p>Our passionate team of chefs combines traditional cooking techniques with innovative culinary concepts to deliver a unique dining experience. Every dish is crafted with attention to detail and a deep respect for quality ingredients.</p>
                                    <p>Whether you're celebrating a special occasion or enjoying a casual evening out, we strive to make every visit memorable with exceptional food, warm hospitality, and an inviting atmosphere.</p>
                                </div>
                                
                                <div class="mb-4">
                                    <h3 class="h5">Cuisine Types</h3>
                                    <div class="d-flex flex-wrap gap-2">
                                        <span class="badge bg-primary" th:text="${restaurant.cuisineType}">Italian</span>
                                        <span class="badge bg-secondary">Mediterranean</span>
                                        <span class="badge bg-success">Contemporary</span>
                                        <span class="badge bg-info">Seafood</span>
                                        <span class="badge bg-warning">Steakhouse</span>
                                    </div>
                                </div>
                                
                                <div>
                                    <h3 class="h5">What Sets Us Apart</h3>
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <div class="d-flex align-items-center">
                                                <div class="bg-success text-white rounded-circle p-2 me-3">
                                                    <i class="fas fa-leaf"></i>
                                                </div>
                                                <div>
                                                    <h6 class="mb-1">Fresh Ingredients</h6>
                                                    <small class="text-muted">We source locally and use only the freshest seasonal ingredients</small>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <div class="d-flex align-items-center">
                                                <div class="bg-warning text-white rounded-circle p-2 me-3">
                                                    <i class="fas fa-award"></i>
                                                </div>
                                                <div>
                                                    <h6 class="mb-1">Award Winning</h6>
                                                    <small class="text-muted">Recognized by Michelin Guide and Top Restaurant Awards</small>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <div class="d-flex align-items-center">
                                                <div class="bg-success text-white rounded-circle p-2 me-3">
                                                    <i class="fas fa-leaf"></i>
                                                </div>
                                                <div>
                                                    <h6 class="mb-1">Sustainable</h6>
                                                    <small class="text-muted">Committed to eco-friendly practices and sustainable sourcing</small>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <div class="d-flex align-items-center">
                                                <div class="bg-primary text-white rounded-circle p-2 me-3">
                                                    <i class="fas fa-clock"></i>
                                                </div>
                                                <div>
                                                    <h6 class="mb-1">10+ Years</h6>
                                                    <small class="text-muted">Over a decade of culinary excellence and service</small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Menu Tab -->
                    <div class="tab-pane fade" id="menu" role="tabpanel">
                        <div class="card">
                            <div class="card-body">
                                <h2 class="h4 mb-3">Our Menu</h2>
                                <p class="text-muted mb-4">Explore our selection of carefully crafted dishes</p>
                                
                                <div class="d-flex gap-2 mb-4">
                                    <button class="btn btn-outline-primary btn-sm active">All</button>
                                    <button class="btn btn-outline-primary btn-sm">Appetizers</button>
                                    <button class="btn btn-outline-primary btn-sm">Main Courses</button>
                                    <button class="btn btn-outline-primary btn-sm">Desserts</button>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6 mb-3" th:each="dish : ${dishes}">
                                        <div class="card h-100">
                                            <div class="card-body">
                                                <div class="d-flex justify-content-between align-items-start">
                                                    <div class="flex-grow-1">
                                                        <h6 class="card-title" th:text="${dish.name}">Grilled Salmon</h6>
                                                        <p class="card-text small text-muted" th:text="${dish.description}">Fresh Atlantic salmon with herbs, served with seasonal vegetables and lemon butter sauce</p>
                                                        <div class="d-flex gap-1">
                                                            <span class="badge bg-light text-dark" th:if="${#strings.containsIgnoreCase(dish.name, 'popular')}">Popular</span>
                                                            <span class="badge bg-success" th:if="${#strings.containsIgnoreCase(dish.name, 'vegetarian')}">Vegetarian</span>
                                                            <span class="badge bg-danger" th:if="${#strings.containsIgnoreCase(dish.name, 'spicy')}">Spicy</span>
                                                        </div>
                                                    </div>
                                                    <div class="text-end">
                                                        <strong class="text-primary" th:text="'$' + ${dish.price}">$28.99</strong>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Tables Tab -->
                    <div class="tab-pane fade" id="tables" role="tabpanel">
                        <div class="card">
                            <div class="card-body">
                                <h2 class="h4 mb-3">Restaurant Layout</h2>
                                <p class="text-muted mb-4">View our table arrangement and choose your preferred seating location</p>
                                
                                <div class="d-flex justify-content-center gap-4 mb-4">
                                    <div class="d-flex align-items-center">
                                        <div class="bg-success rounded-circle me-2" style="width: 12px; height: 12px;"></div>
                                        <span>Available</span>
                                    </div>
                                    <div class="d-flex align-items-center">
                                        <div class="bg-danger rounded-circle me-2" style="width: 12px; height: 12px;"></div>
                                        <span>Reserved</span>
                                    </div>
                                </div>
                                
                                <div class="bg-light border rounded p-4 mb-4" style="min-height: 400px; position: relative;">
                                    <div class="position-absolute top-0 start-0 bg-secondary text-white px-2 py-1 rounded">Windows</div>
                                    <div class="position-absolute top-0 end-0 bg-secondary text-white px-2 py-1 rounded">Kitchen</div>
                                    <div class="position-absolute bottom-0 start-50 translate-middle-x bg-secondary text-white px-2 py-1 rounded">Entrance</div>
                                    
                                    <!-- Tables -->
                                    <div class="position-absolute bg-success text-white rounded d-flex align-items-center justify-content-center" style="width: 40px; height: 40px; top: 100px; left: 50px; cursor: pointer;">T1<br>2p</div>
                                    <div class="position-absolute bg-danger text-white rounded d-flex align-items-center justify-content-center" style="width: 40px; height: 40px; top: 100px; left: 120px; cursor: pointer;">T6<br>2p</div>
                                    <div class="position-absolute bg-success text-white rounded d-flex align-items-center justify-content-center" style="width: 40px; height: 40px; top: 100px; left: 190px; cursor: pointer;">T2<br>2p</div>
                                    <div class="position-absolute bg-danger text-white rounded d-flex align-items-center justify-content-center" style="width: 40px; height: 40px; top: 200px; left: 100px; cursor: pointer;">T3<br>4p</div>
                                    <div class="position-absolute bg-success text-white rounded d-flex align-items-center justify-content-center" style="width: 40px; height: 40px; top: 200px; left: 170px; cursor: pointer;">T4<br>4p</div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-4 mb-3">
                                        <div class="card">
                                            <img src="https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" class="card-img-top" alt="Window Tables" style="height: 120px; object-fit: cover;">
                                            <div class="card-body">
                                                <h6 class="card-title">Window Tables</h6>
                                                <p class="card-text small text-muted">2-4 seats, great views</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <div class="card">
                                            <img src="https://images.unsplash.com/photo-1555396273-367ea4eb4db5?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" class="card-img-top" alt="Center Tables" style="height: 120px; object-fit: cover;">
                                            <div class="card-body">
                                                <h6 class="card-title">Center Tables</h6>
                                                <p class="card-text small text-muted">4-6 seats, lively atmosphere</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <div class="card">
                                            <img src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" class="card-img-top" alt="Private Room" style="height: 120px; object-fit: cover;">
                                            <div class="card-body">
                                                <h6 class="card-title">Private Room</h6>
                                                <p class="card-text small text-muted">6-8 seats, intimate setting</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Reviews Tab -->
                    <div class="tab-pane fade" id="reviews" role="tabpanel">
                        <div class="card">
                            <div class="card-body">
                                <h2 class="h4 mb-3">Customer Reviews</h2>
                                <p class="text-muted mb-4">See what our guests are saying about their experience</p>
                                
                                <div class="row mb-4">
                                    <div class="col-md-4 text-center">
                                        <div class="display-4 fw-bold text-primary" th:text="${restaurant.formattedAverageRating}">4.7</div>
                                        <div class="d-flex justify-content-center mb-2">
                                            <i class="fas fa-star text-warning"></i>
                                            <i class="fas fa-star text-warning"></i>
                                            <i class="fas fa-star text-warning"></i>
                                            <i class="fas fa-star text-warning"></i>
                                            <i class="fas fa-star text-warning"></i>
                                        </div>
                                        <small class="text-muted" th:text="'Based on ' + ${restaurant.reviewCount} + ' reviews'">Based on 207 reviews</small>
                                    </div>
                                    <div class="col-md-8">
                                        <div class="d-flex align-items-center mb-2">
                                            <span class="me-2">5★</span>
                                            <div class="progress flex-grow-1 me-2" style="height: 8px;">
                                                <div class="progress-bar bg-warning" style="width: 80%"></div>
                                            </div>
                                            <span class="text-muted">156</span>
                                        </div>
                                        <div class="d-flex align-items-center mb-2">
                                            <span class="me-2">4★</span>
                                            <div class="progress flex-grow-1 me-2" style="height: 8px;">
                                                <div class="progress-bar bg-warning" style="width: 15%"></div>
                                            </div>
                                            <span class="text-muted">31</span>
                                        </div>
                                        <div class="d-flex align-items-center mb-2">
                                            <span class="me-2">3★</span>
                                            <div class="progress flex-grow-1 me-2" style="height: 8px;">
                                                <div class="progress-bar bg-warning" style="width: 3%"></div>
                                            </div>
                                            <span class="text-muted">12</span>
                                        </div>
                                        <div class="d-flex align-items-center mb-2">
                                            <span class="me-2">2★</span>
                                            <div class="progress flex-grow-1 me-2" style="height: 8px;">
                                                <div class="progress-bar bg-warning" style="width: 1%"></div>
                                            </div>
                                            <span class="text-muted">5</span>
                                        </div>
                                        <div class="d-flex align-items-center mb-2">
                                            <span class="me-2">1★</span>
                                            <div class="progress flex-grow-1 me-2" style="height: 8px;">
                                                <div class="progress-bar bg-warning" style="width: 1%"></div>
                                            </div>
                                            <span class="text-muted">3</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6 mb-3" th:each="review : ${recentReviews}">
                                        <div class="card">
                                            <div class="card-body">
                                                <div class="d-flex align-items-center mb-2">
                                                    <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px;">
                                                        <span th:text="${#strings.substring(review.customerName, 0, 2)}">SJ</span>
                                                    </div>
                                                    <div class="flex-grow-1">
                                                        <h6 class="mb-0" th:text="${review.customerName}">Sarah Johnson</h6>
                                                        <div class="d-flex align-items-center">
                                                            <div class="d-flex me-2">
                                                                <i class="fas fa-star text-warning" th:each="i : ${#numbers.sequence(1, 5)}" th:classappend="${i <= review.rating} ? ' text-warning' : ' text-muted'"></i>
                                                            </div>
                                                            <small class="text-muted" th:text="${#temporals.format(review.createdAt, 'dd/MM/yyyy')}">2 days ago</small>
                                                        </div>
                                                    </div>
                                                </div>
                                                <p class="card-text" th:text="${review.comment}">The food was absolutely incredible. We had the grilled salmon and beef tenderloin - both cooked to perfection. The service was attentive without being intrusive. The ambiance is perfect for a romantic dinner.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Right Column - Reservation Widget -->
            <div class="col-lg-4">
                <div class="reservation-widget">
                    <h3 class="reservation-title">Make a Reservation</h3>
                    
                    <form th:action="@{/booking/new}" method="get">
                        <input type="hidden" name="restaurantId" th:value="${restaurant.restaurantId}">
                        
                        <div class="form-group">
                            <label class="form-label">Select Date</label>
                            <div class="input-group">
                                <i class="fas fa-calendar input-icon"></i>
                                <input type="date" class="form-control" name="date" required>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Select Time</label>
                            <div class="input-group">
                                <i class="fas fa-clock input-icon"></i>
                                <select class="form-control" name="time" required>
                                    <option value="">Choose time</option>
                                    <option value="17:00">5:00 PM</option>
                                    <option value="17:30">5:30 PM</option>
                                    <option value="18:00">6:00 PM</option>
                                    <option value="18:30">6:30 PM</option>
                                    <option value="19:00">7:00 PM</option>
                                    <option value="19:30">7:30 PM</option>
                                    <option value="20:00">8:00 PM</option>
                                    <option value="20:30">8:30 PM</option>
                                    <option value="21:00">9:00 PM</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Number of Guests</label>
                            <div class="input-group">
                                <i class="fas fa-user input-icon"></i>
                                <select class="form-control" name="guests" required>
                                    <option value="">Select guests</option>
                                    <option value="1">1 Guest</option>
                                    <option value="2">2 Guests</option>
                                    <option value="3">3 Guests</option>
                                    <option value="4">4 Guests</option>
                                    <option value="5">5 Guests</option>
                                    <option value="6">6 Guests</option>
                                    <option value="7">7 Guests</option>
                                    <option value="8">8 Guests</option>
                                </select>
                            </div>
                        </div>
                        
                        <button type="submit" class="btn-book">
                            <i class="fas fa-calendar-check me-2"></i>
                            Book Now
                        </button>
                        
                        <div class="cancellation-policy">
                            <i class="fas fa-info-circle me-1"></i>
                            You can cancel or modify your booking up to 24 hours before your reservation
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Footer -->
    <div th:replace="~{fragments/design-system-components :: unified-footer}"></div>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Set default date to tomorrow
        document.addEventListener('DOMContentLoaded', function() {
            const dateInput = document.querySelector('input[name="date"]');
            if (dateInput) {
                const tomorrow = new Date();
                tomorrow.setDate(tomorrow.getDate() + 1);
                dateInput.value = tomorrow.toISOString().split('T')[0];
            }
        });
    </script>
</body>
</html>
