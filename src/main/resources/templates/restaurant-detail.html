<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${pageTitle}">Chi tiết Nhà hàng</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Luxury CSS -->
    <link th:href="@{/css/luxury.css}" rel="stylesheet">
    
    <style>
        :root {
            --primary: #6366f1;
            --secondary: #8b5cf6;
        }
        
        .cover-section {
            position: relative;
            height: 400px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            margin-bottom: 2rem;
            overflow: hidden;
        }
        
        .cover-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0.9;
        }
        
        .cover-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            padding: 3rem 0 2rem;
        }
        
        .restaurant-logo {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 4px solid white;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            object-fit: cover;
            background: white;
        }
        
        .restaurant-name {
            color: white;
            font-size: 2.5rem;
            font-weight: 700;
            margin: 1rem 0 0.5rem;
        }
        
        .info-card {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }
        
        .info-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.75rem 0;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .info-item:last-child {
            border-bottom: none;
        }
        
        .info-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }
        
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }
        
        .gallery-item {
            position: relative;
            border-radius: 1rem;
            overflow: hidden;
            aspect-ratio: 1;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        
        .gallery-item:hover {
            transform: scale(1.05);
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }
        
        .gallery-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .dish-card {
            background: white;
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            margin-bottom: 1.5rem;
        }
        
        .dish-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.15);
        }
        
        .dish-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        
        .dish-content {
            padding: 1.5rem;
        }
        
        .dish-name {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        
        .dish-price {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }
        
        .table-card {
            background: white;
            border-radius: 1rem;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        
        .table-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .table-name {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--primary);
        }
        
        .badge-status {
            display: inline-block;
            padding: 0.5rem 1rem;
            border-radius: 999px;
            font-size: 0.9rem;
            font-weight: 600;
        }
        
        .badge-available {
            background: #d1fae5;
            color: #065f46;
        }
        
        .badge-occupied {
            background: #fee2e2;
            color: #991b1b;
        }
        
        .section-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 2rem;
            position: relative;
            padding-bottom: 1rem;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 80px;
            height: 4px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            border-radius: 2px;
        }
        
        .cta-section {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 3rem;
            border-radius: 1rem;
            text-align: center;
            margin: 3rem 0;
        }
        
        .btn-book-now {
            background: white;
            color: var(--primary);
            padding: 1rem 3rem;
            font-size: 1.25rem;
            font-weight: 700;
            border-radius: 999px;
            border: none;
            transition: all 0.3s ease;
        }
        
        .btn-book-now:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div th:insert="fragments/header :: site-header"></div>
    
    <!-- Cover Section -->
    <div class="cover-section">
        <img th:if="${cover != null}" th:src="${cover.url}" class="cover-image" alt="Cover">
        <div class="cover-overlay">
            <div class="container">
                <div class="d-flex align-items-center">
                    <img th:if="${logo != null}" th:src="${logo.url}" class="restaurant-logo" alt="Logo">
                    <img th:unless="${logo != null}" src="https://via.placeholder.com/120" class="restaurant-logo" alt="Logo">
                    <div class="ms-4">
                        <h1 class="restaurant-name" th:text="${restaurant.restaurantName}">Tên Nhà hàng</h1>
                        <p class="text-white mb-0">
                            <i class="fas fa-map-marker-alt me-2"></i>
                            <span th:text="${restaurant.address}">Địa chỉ</span>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="container mb-5">
        <div class="row">
            <!-- Left Column - Info & Description -->
            <div class="col-lg-8">
                <!-- Description -->
                <div class="info-card">
                    <h2 class="section-title">Giới thiệu</h2>
                    <p class="lead" th:text="${restaurant.description}">Mô tả nhà hàng</p>
                </div>
                
                <!-- Gallery -->
                <div class="info-card" th:if="${gallery != null and !gallery.isEmpty()}">
                    <h2 class="section-title">Thư viện Ảnh</h2>
                    <div class="gallery-grid">
                        <div class="gallery-item" th:each="image : ${gallery}">
                            <img th:src="${image.url}" class="gallery-image" alt="Gallery">
                        </div>
                    </div>
                </div>
                
                <!-- Menu / Dishes -->
                <div class="info-card" th:if="${dishes != null and !dishes.isEmpty()}">
                    <h2 class="section-title">Thực đơn</h2>
                    <div class="row">
                        <div class="col-md-6" th:each="dish : ${dishes}">
                            <div class="dish-card">
                                <div class="dish-image" style="background: linear-gradient(135deg, #667eea, #764ba2);">
                                    <!-- Placeholder for dish image -->
                                </div>
                                <div class="dish-content">
                                    <h3 class="dish-name" th:text="${dish.name}">Tên món</h3>
                                    <p class="text-muted mb-2" th:text="${dish.description}">Mô tả</p>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span class="dish-price" th:text="${#numbers.formatDecimal(dish.price, 0, 'COMMA', 0, 'POINT')} + ' VNĐ'">85.000 VNĐ</span>
                                        <span class="badge bg-primary" th:text="${dish.category}">Main</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Tables -->
                <div class="info-card" th:if="${tables != null and !tables.isEmpty()}">
                    <h2 class="section-title">Bàn Ăn</h2>
                    <div class="row">
                        <div class="col-md-4 mb-3" th:each="table : ${tables}">
                            <div class="table-card">
                                <div class="table-name" th:text="${table.tableName}">T1</div>
                                <p class="text-muted mb-2">
                                    <i class="fas fa-users"></i>
                                    <span th:text="${table.capacity}">4</span> chỗ ngồi
                                </p>
                                <span class="badge-status badge-available" 
                                      th:if="${table.status.toString() == 'AVAILABLE'}"
                                      th:text="${table.status}">AVAILABLE</span>
                                <span class="badge-status badge-occupied" 
                                      th:unless="${table.status.toString() == 'AVAILABLE'}"
                                      th:text="${table.status}">OCCUPIED</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Right Column - Contact Info & CTA -->
            <div class="col-lg-4">
                <!-- Contact Info -->
                <div class="info-card sticky-top" style="top: 20px;">
                    <h3 class="h4 mb-4">Thông tin Liên hệ</h3>
                    
                    <div class="info-item">
                        <div class="info-icon">
                            <i class="fas fa-phone"></i>
                        </div>
                        <div>
                            <div class="text-muted small">Điện thoại</div>
                            <div class="fw-bold" th:text="${restaurant.phone}">0123 456 789</div>
                        </div>
                    </div>
                    
                    <div class="info-item">
                        <div class="info-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div>
                            <div class="text-muted small">Giờ mở cửa</div>
                            <div class="fw-bold" th:text="${restaurant.openingHours}">10:00 - 22:00</div>
                        </div>
                    </div>
                    
                    <div class="info-item">
                        <div class="info-icon">
                            <i class="fas fa-utensils"></i>
                        </div>
                        <div>
                            <div class="text-muted small">Loại ẩm thực</div>
                            <div class="fw-bold" th:text="${restaurant.cuisineType}">Vietnamese</div>
                        </div>
                    </div>
                    
                    <div class="info-item" th:if="${restaurant.averagePrice != null}">
                        <div class="info-icon">
                            <i class="fas fa-tag"></i>
                        </div>
                        <div>
                            <div class="text-muted small">Giá trung bình</div>
                            <div class="fw-bold" th:text="${#numbers.formatDecimal(restaurant.averagePrice, 0, 'COMMA', 0, 'POINT')} + ' VNĐ'">150.000 VNĐ</div>
                        </div>
                    </div>
                    
                    <div class="info-item" th:if="${restaurant.websiteUrl != null}">
                        <div class="info-icon">
                            <i class="fas fa-globe"></i>
                        </div>
                        <div>
                            <div class="text-muted small">Website</div>
                            <a th:href="${restaurant.websiteUrl}" target="_blank" class="fw-bold text-decoration-none">Truy cập website</a>
                        </div>
                    </div>
                    
                    <!-- Book Button -->
                    <div class="mt-4" sec:authorize="!hasRole('RESTAURANT_OWNER')">
                        <a th:href="@{/booking/new}" class="btn btn-book-now w-100">
                            <i class="fas fa-calendar-check me-2"></i>
                            Đặt Bàn Ngay
                        </a>
                    </div>
                    
                    <!-- Owner Dashboard Link -->
                    <div class="mt-4" sec:authorize="hasRole('RESTAURANT_OWNER')">
                        <a th:href="@{/restaurant-owner/dashboard}" class="btn btn-book-now w-100" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white;">
                            <i class="fas fa-tachometer-alt me-2"></i>
                            Quản lý Dashboard
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- CTA Section -->
    <div class="container" sec:authorize="!hasRole('RESTAURANT_OWNER')">
        <div class="cta-section">
            <h2 class="mb-3">Sẵn sàng đặt bàn?</h2>
            <p class="mb-4 fs-5">Trải nghiệm ẩm thực tuyệt vời đang chờ đón bạn!</p>
            <a th:href="@{/booking/new}" class="btn btn-book-now">
                <i class="fas fa-calendar-plus me-2"></i>
                Đặt Bàn Ngay
            </a>
        </div>
    </div>
    
    <!-- Footer -->
    <div th:insert="fragments/footer :: site-footer"></div>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

